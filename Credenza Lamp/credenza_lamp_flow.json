[{"id":"41dc0bde7ec9a867","type":"subflow","name":"dynamic shuffle","info":"","category":"","in":[{"x":100,"y":60,"wires":[{"id":"cd914ce239d52668"}]}],"out":[{"x":330,"y":60,"wires":[{"id":"dd90c3c54e5c380f","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":1000,"y":120,"wires":[{"id":"aaa5864da54154cf","port":0}]}},{"id":"65781ea69eb8d8ca","type":"api-current-state","z":"41dc0bde7ec9a867","name":"dynamic shuffle enabled","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.dynamic_shuffle_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":390,"y":340,"wires":[["281448ab659bbefd","a98165f0c3bec9af"],["9123fb697d75a10a"]]},{"id":"281448ab659bbefd","type":"delay","z":"41dc0bde7ec9a867","name":"Random (69-420)","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"69","randomLast":"420","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":630,"y":340,"wires":[["ec4358cb4c9a79f7"]]},{"id":"ec4358cb4c9a79f7","type":"api-current-state","z":"41dc0bde7ec9a867","name":"random","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Random","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":800,"y":340,"wires":[["6660fa71b16312c3","b1efda460a328f55"],["9053f4d286723b39"]]},{"id":"be8a4a7e68225ca5","type":"moment","z":"41dc0bde7ec9a867","name":"add timestamp","topic":"","input":"","inputType":"date","inTz":"America/Denver","adjAmount":0,"adjType":"days","adjDir":"add","format":"YYYY-MM-DD HH:mm:ss","locale":"C","output":"payload","outputType":"msg","outTz":"America/Denver","x":760,"y":160,"wires":[["aaa5864da54154cf"]]},{"id":"432bf2a7dc4e5cf2","type":"change","z":"41dc0bde7ec9a867","name":"enabled","rules":[{"t":"set","p":"payload","pt":"msg","to":"enabled","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":80,"wires":[["aaa5864da54154cf"]]},{"id":"79258e9154b4dc59","type":"change","z":"41dc0bde7ec9a867","name":"disabled","rules":[{"t":"set","p":"payload","pt":"msg","to":"disabled","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":120,"wires":[["aaa5864da54154cf"]]},{"id":"9053f4d286723b39","type":"link out","z":"41dc0bde7ec9a867","name":"link out 824","mode":"link","links":["8a10a8bb686d2531"],"x":915,"y":380,"wires":[]},{"id":"8a10a8bb686d2531","type":"link in","z":"41dc0bde7ec9a867","name":"link in 573","links":["9053f4d286723b39"],"x":625,"y":120,"wires":[["79258e9154b4dc59"]]},{"id":"a98165f0c3bec9af","type":"link out","z":"41dc0bde7ec9a867","name":"link out 825","mode":"link","links":["83b294a97ec6ef0b"],"x":555,"y":300,"wires":[]},{"id":"83b294a97ec6ef0b","type":"link in","z":"41dc0bde7ec9a867","name":"link in 574","links":["a98165f0c3bec9af"],"x":625,"y":80,"wires":[["432bf2a7dc4e5cf2"]]},{"id":"6660fa71b16312c3","type":"link out","z":"41dc0bde7ec9a867","name":"link out 826","mode":"link","links":["93c5a8ba27443782"],"x":915,"y":300,"wires":[]},{"id":"93c5a8ba27443782","type":"link in","z":"41dc0bde7ec9a867","name":"link in 575","links":["6660fa71b16312c3"],"x":625,"y":160,"wires":[["be8a4a7e68225ca5"]]},{"id":"cd914ce239d52668","type":"link out","z":"41dc0bde7ec9a867","name":"link out 827","mode":"link","links":["ca0f69404f12e6dd"],"x":185,"y":60,"wires":[]},{"id":"ca0f69404f12e6dd","type":"link in","z":"41dc0bde7ec9a867","name":"link in 576","links":["cd914ce239d52668"],"x":245,"y":340,"wires":[["65781ea69eb8d8ca"]]},{"id":"77a8ce1e704a3468","type":"change","z":"41dc0bde7ec9a867","name":"brightness","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":780,"wires":[["bcc588e2b458fd78"]]},{"id":"6bc6acfd4d6cc401","type":"debug","z":"41dc0bde7ec9a867","name":"debug 22","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1260,"y":300,"wires":[]},{"id":"64488e171925454e","type":"switch","z":"41dc0bde7ec9a867","name":"Hue Zone","property":"hue_zone","propertyType":"msg","rules":[{"t":"eq","v":"Front Room","vt":"str"},{"t":"eq","v":"Kitchen","vt":"str"},{"t":"eq","v":"Patio","vt":"str"},{"t":"eq","v":"Office","vt":"str"},{"t":"eq","v":"Bedroom","vt":"str"},{"t":"eq","v":"Master Bathroom","vt":"str"},{"t":"eq","v":"Guest Bathroom","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":8,"x":320,"y":620,"wires":[["80781d83525f7739"],["48aa9642d1694e80"],["e4234e6264c9aba2"],["6ce602c113f3f82c"],["1f6a3d84d9973ff3"],["8128147bb2063e16"],["66c38de865dc43b4"],["77a8ce1e704a3468"]]},{"id":"48acb918cb4b108e","type":"link out","z":"41dc0bde7ec9a867","name":"link out 847","mode":"link","links":["dd90c3c54e5c380f"],"x":915,"y":620,"wires":[]},{"id":"dd90c3c54e5c380f","type":"link in","z":"41dc0bde7ec9a867","name":"link in 596","links":["48acb918cb4b108e"],"x":275,"y":60,"wires":[[]]},{"id":"e9f0d48ba7e6079c","type":"link out","z":"41dc0bde7ec9a867","name":"link out 848","mode":"link","links":["8dbfa530334ef692"],"x":985,"y":340,"wires":[]},{"id":"8dbfa530334ef692","type":"link in","z":"41dc0bde7ec9a867","name":"link in 597","links":["e9f0d48ba7e6079c"],"x":225,"y":620,"wires":[["64488e171925454e"]]},{"id":"80781d83525f7739","type":"change","z":"41dc0bde7ec9a867","name":"front room","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"front_room.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":500,"wires":[["bcc588e2b458fd78"]]},{"id":"48aa9642d1694e80","type":"change","z":"41dc0bde7ec9a867","name":"kitchen","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"kitchen.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":540,"wires":[["bcc588e2b458fd78"]]},{"id":"e4234e6264c9aba2","type":"change","z":"41dc0bde7ec9a867","name":"patio","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"patio.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":580,"wires":[["bcc588e2b458fd78"]]},{"id":"6ce602c113f3f82c","type":"change","z":"41dc0bde7ec9a867","name":"office","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"office.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":620,"wires":[["bcc588e2b458fd78"]]},{"id":"1f6a3d84d9973ff3","type":"change","z":"41dc0bde7ec9a867","name":"bedroom","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"bedroom.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":660,"wires":[["bcc588e2b458fd78"]]},{"id":"8128147bb2063e16","type":"change","z":"41dc0bde7ec9a867","name":"master bathroom","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"master_bathroom.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":700,"wires":[["bcc588e2b458fd78"]]},{"id":"66c38de865dc43b4","type":"change","z":"41dc0bde7ec9a867","name":"guest bathroom","rules":[{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"guest_bathroom.set.brightness","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":740,"wires":[["bcc588e2b458fd78"]]},{"id":"aaa5864da54154cf","type":"junction","z":"41dc0bde7ec9a867","x":940,"y":120,"wires":[[]]},{"id":"9123fb697d75a10a","type":"junction","z":"41dc0bde7ec9a867","x":540,"y":380,"wires":[["9053f4d286723b39"]]},{"id":"b1efda460a328f55","type":"junction","z":"41dc0bde7ec9a867","x":900,"y":340,"wires":[["e9f0d48ba7e6079c"]]},{"id":"bcc588e2b458fd78","type":"junction","z":"41dc0bde7ec9a867","x":820,"y":620,"wires":[["48acb918cb4b108e"]]},{"id":"9e5ef3da4a978410","type":"subflow","name":"credenza lamp verify undefined","info":"","category":"","in":[{"x":200,"y":80,"wires":[{"id":"a4e15f7b3311a960"}]}],"out":[{"x":660,"y":60,"wires":[{"id":"fd7485856c984b8a","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":660,"y":100,"wires":[{"id":"fd7485856c984b8a","port":0}]}},{"id":"ca20a40e9438b321","type":"ha-wait-until","z":"9e5ef3da4a978410","name":"defined (30s)","server":"e14e0276.68398","version":2,"outputs":2,"entityId":"{{topic}}","entityIdFilterType":"exact","property":"state","comparator":"is_not","value":"Undefined","valueType":"str","timeout":"30","timeoutType":"num","timeoutUnits":"seconds","checkCurrentState":true,"blockInputOverrides":true,"outputProperties":[],"entityLocation":"data","entityLocationType":"none","x":360,"y":180,"wires":[["5b1e44f7d55c0970"],["19768fd2639175bb"]]},{"id":"5b1e44f7d55c0970","type":"api-current-state","z":"9e5ef3da4a978410","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"msg","value":"","valueType":"entityState"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":530,"y":160,"wires":[["484055c211b93b9e"]]},{"id":"b9e29792e507da68","type":"link out","z":"9e5ef3da4a978410","name":"link out 806","mode":"link","links":["2b9cd7bf69d98363"],"x":355,"y":80,"wires":[]},{"id":"2b9cd7bf69d98363","type":"link in","z":"9e5ef3da4a978410","name":"link in 558","links":["b9e29792e507da68"],"x":245,"y":180,"wires":[["ca20a40e9438b321"]]},{"id":"22c78e74395c5534","type":"api-current-state","z":"9e5ef3da4a978410","name":"bulb a","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.credenza_bulb_a","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":290,"y":280,"wires":[["5c9c6f8a8bb1c5bc"],["6221212c7ecf4a24"]]},{"id":"5c9c6f8a8bb1c5bc","type":"api-current-state","z":"9e5ef3da4a978410","name":"bulb b","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.credenza_bulb_b","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":280,"wires":[["80344825c9400a93"],["6221212c7ecf4a24"]]},{"id":"eb1806c6ded7484a","type":"api-call-service","z":"9e5ef3da4a978410","name":"input select turn off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"Turn Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":410,"y":340,"wires":[["fc61f1741219281b"]]},{"id":"80344825c9400a93","type":"change","z":"9e5ef3da4a978410","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":280,"wires":[["448565d89d75290a"]]},{"id":"fc61f1741219281b","type":"change","z":"9e5ef3da4a978410","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Turn Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":340,"wires":[["448565d89d75290a"]]},{"id":"484055c211b93b9e","type":"link out","z":"9e5ef3da4a978410","name":"link out 807","mode":"link","links":["f479e57ee311d32a"],"x":635,"y":160,"wires":[]},{"id":"f479e57ee311d32a","type":"link in","z":"9e5ef3da4a978410","name":"link in 559","links":["484055c211b93b9e","5ab08168fdadb782"],"x":525,"y":80,"wires":[["fd7485856c984b8a"]]},{"id":"19768fd2639175bb","type":"link out","z":"9e5ef3da4a978410","name":"link out 808","mode":"link","links":["b8312c96810cd4e3"],"x":475,"y":200,"wires":[]},{"id":"b8312c96810cd4e3","type":"link in","z":"9e5ef3da4a978410","name":"link in 560","links":["19768fd2639175bb"],"x":205,"y":280,"wires":[["22c78e74395c5534"]]},{"id":"5ab08168fdadb782","type":"link out","z":"9e5ef3da4a978410","name":"link out 809","mode":"link","links":["f479e57ee311d32a"],"x":815,"y":300,"wires":[]},{"id":"fd7485856c984b8a","type":"junction","z":"9e5ef3da4a978410","x":610,"y":80,"wires":[[]]},{"id":"a4e15f7b3311a960","type":"junction","z":"9e5ef3da4a978410","x":280,"y":80,"wires":[["b9e29792e507da68"]]},{"id":"448565d89d75290a","type":"junction","z":"9e5ef3da4a978410","x":770,"y":300,"wires":[["5ab08168fdadb782"]]},{"id":"6221212c7ecf4a24","type":"junction","z":"9e5ef3da4a978410","x":240,"y":340,"wires":[["eb1806c6ded7484a"]]},{"id":"152a4a9b90c79d8f","type":"subflow","name":"hue lights spectrum loop","info":"","category":"","in":[{"x":40,"y":100,"wires":[{"id":"441ba3d0868d0e0c"}]}],"out":[{"x":1600,"y":120,"wires":[{"id":"08048b83ad0d1981","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":1780,"y":160,"wires":[{"id":"e86adbe187b31cf9","port":0}]}},{"id":"86677320b957de06","type":"link in","z":"152a4a9b90c79d8f","name":"loop","links":["9eda65a260f385f8","d377ebddd9b5b9fd","2be4b6963cec3b84"],"x":115,"y":580,"wires":[["7b4c53e40d3a28c3"]]},{"id":"e86adbe187b31cf9","type":"change","z":"152a4a9b90c79d8f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"spectrum_target_hue","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1660,"y":160,"wires":[[]]},{"id":"272cc052708d44e1","type":"link out","z":"152a4a9b90c79d8f","name":"link out 758","mode":"link","links":["205489737e3c55ee","871bf2ac99b8c3bc"],"x":885,"y":160,"wires":[]},{"id":"205489737e3c55ee","type":"link in","z":"152a4a9b90c79d8f","name":"link in 506","links":["272cc052708d44e1"],"x":65,"y":260,"wires":[["b5e5caee09a29865"]]},{"id":"da8a8dc629497d83","type":"api-current-state","z":"152a4a9b90c79d8f","name":"virtual hue","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.patio_light_strip_virtual_hs_hue","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"spectrum_current_hue","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":450,"y":120,"wires":[["1be536fb63bf77f6"]]},{"id":"441ba3d0868d0e0c","type":"api-current-state","z":"152a4a9b90c79d8f","name":"spectrum active false","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"false","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.light_scene_spectrum_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":250,"y":100,"wires":[["e0a3ef724842619d"],["da8a8dc629497d83"]]},{"id":"e0a3ef724842619d","type":"api-call-service","z":"152a4a9b90c79d8f","name":"patio spectrum lights","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["input_select.patio_lights"],"data":"{\"option\":\"Spectrum\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":490,"y":80,"wires":[["fc45e70e65a8f5b8"]]},{"id":"fc45e70e65a8f5b8","type":"delay","z":"152a4a9b90c79d8f","name":"","pauseType":"delay","timeout":"7","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":670,"y":80,"wires":[["da8a8dc629497d83"]]},{"id":"1be536fb63bf77f6","type":"function","z":"152a4a9b90c79d8f","name":"set hue","func":"msg.spectrum_set_hue = Math.floor(msg.spectrum_current_hue - 2)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":120,"wires":[["a24853a72263c75b"]]},{"id":"e1c84cbc0fa50e03","type":"api-current-state","z":"152a4a9b90c79d8f","name":"target hue","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.light_scene_spectrum_target_hue","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"spectrum_target_hue","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":160,"wires":[["7197cb748ba366ce"]]},{"id":"7197cb748ba366ce","type":"api-current-state","z":"152a4a9b90c79d8f","name":"target time","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.light_scene_spectrum_target_time","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"spectrum_target_time","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":160,"wires":[["980eeb7a36e2030e"]]},{"id":"50886d7708cc2a86","type":"moment","z":"152a4a9b90c79d8f","name":"current time","topic":"","input":"","inputType":"date","inTz":"America/Denver","adjAmount":0,"adjType":"days","adjDir":"add","format":"X","locale":"C","output":"spectrum_current_time","outputType":"msg","outTz":"America/Denver","x":270,"y":160,"wires":[["e1c84cbc0fa50e03"]]},{"id":"980eeb7a36e2030e","type":"function","z":"152a4a9b90c79d8f","name":"time difference","func":"msg.spectrum_time_difference = Math.floor(msg.spectrum_target_time - msg.spectrum_current_time - 5)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":160,"wires":[["272cc052708d44e1"]]},{"id":"01ea6d3bce8bdd85","type":"switch","z":"152a4a9b90c79d8f","name":"time difference >30","property":"spectrum_time_difference","propertyType":"msg","rules":[{"t":"gte","v":"30","vt":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":230,"y":260,"wires":[["bd916afdf6dbd1bf"],["b17bde4a61366910"]]},{"id":"b17bde4a61366910","type":"api-call-service","z":"152a4a9b90c79d8f","name":"entities","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{ \"brightness\" : \"{{brightness}}\" ,  \"hs_color\" : [\"{{spectrum_target_hue}}\",100] }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":540,"y":300,"wires":[["c6709cce4eb87a5d","4d7b6c754ecddadd"]]},{"id":"bd916afdf6dbd1bf","type":"api-call-service","z":"152a4a9b90c79d8f","name":"entities","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{ \"brightness\" : \"{{brightness}}\" ,  \"hs_color\" : [\"{{spectrum_set_hue}}\",100] }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":540,"y":220,"wires":[["19b5526226ed5e45","4a9994f68ac6c232"]]},{"id":"19b5526226ed5e45","type":"delay","z":"152a4a9b90c79d8f","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":240,"wires":[["d2c07210f70f1cd6"]]},{"id":"d2c07210f70f1cd6","type":"api-call-service","z":"152a4a9b90c79d8f","name":"transition","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{ \"transition\" : \"{{spectrum_time_difference}}\" , \"hs_color\" : [\"{{spectrum_target_hue}}\",100] }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":860,"y":240,"wires":[["c7edda5564ede214"]]},{"id":"75fa1d75a1bba42d","type":"api-call-service","z":"152a4a9b90c79d8f","name":"entities","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{ \"hs_color\" : [\"{{spectrum_target_hue}}\",100] }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":360,"y":580,"wires":[["00025f4c1066f619","286489b473f1fb2e"]]},{"id":"327a557865e52ccc","type":"api-current-state","z":"152a4a9b90c79d8f","name":"target hue","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.light_scene_spectrum_target_hue","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"spectrum_target_hue","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":390,"y":660,"wires":[["dc9a09b5e962b70f"]]},{"id":"dc9a09b5e962b70f","type":"api-current-state","z":"152a4a9b90c79d8f","name":"target time","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.light_scene_spectrum_target_time","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"spectrum_target_time","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":660,"wires":[["c48d3ab7bfc116e1"]]},{"id":"c48d3ab7bfc116e1","type":"function","z":"152a4a9b90c79d8f","name":"time difference","func":"msg.spectrum_time_difference = Math.floor(msg.spectrum_target_time - msg.spectrum_current_time - 5)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":660,"wires":[["a34f2dfae99b9c37"]]},{"id":"69389afc1247ccaa","type":"delay","z":"152a4a9b90c79d8f","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":220,"y":720,"wires":[["cdb8408ea4407871"]]},{"id":"cdb8408ea4407871","type":"api-call-service","z":"152a4a9b90c79d8f","name":"transition","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{ \"transition\" : \"{{spectrum_time_difference}}\" , \"hs_color\" : [\"{{spectrum_target_hue}}\",100] }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":360,"y":720,"wires":[["ad2f1dda6ee319a0"]]},{"id":"2be4b6963cec3b84","type":"link out","z":"152a4a9b90c79d8f","name":"loop","mode":"link","links":["86677320b957de06"],"x":795,"y":500,"wires":[]},{"id":"2f806f6a7c3336fd","type":"moment","z":"152a4a9b90c79d8f","name":"current time","topic":"","input":"","inputType":"date","inTz":"America/Denver","adjAmount":0,"adjType":"days","adjDir":"add","format":"X","locale":"C","output":"spectrum_current_time","outputType":"msg","outTz":"America/Denver","x":230,"y":660,"wires":[["327a557865e52ccc"]]},{"id":"e0f0d5b960642bd8","type":"ha-wait-until","z":"152a4a9b90c79d8f","name":"new target","server":"e14e0276.68398","version":2,"outputs":2,"entityId":"sensor.light_scene_spectrum_target_hue_compare","entityIdFilterType":"exact","property":"state","comparator":"is","value":"true","valueType":"str","timeout":"370","timeoutType":"num","timeoutUnits":"seconds","checkCurrentState":true,"blockInputOverrides":true,"outputProperties":[],"x":510,"y":480,"wires":[["08f446040ce0383e"],["d520852b8647d318"]]},{"id":"4a9994f68ac6c232","type":"link out","z":"152a4a9b90c79d8f","name":"link out 763","mode":"link","links":["8208216f86edead9"],"x":675,"y":200,"wires":[]},{"id":"8208216f86edead9","type":"link in","z":"152a4a9b90c79d8f","name":"link in 511","links":["4a9994f68ac6c232","c6709cce4eb87a5d","00025f4c1066f619"],"x":1515,"y":160,"wires":[["e86adbe187b31cf9"]]},{"id":"c6709cce4eb87a5d","type":"link out","z":"152a4a9b90c79d8f","name":"link out 764","mode":"link","links":["8208216f86edead9"],"x":675,"y":280,"wires":[]},{"id":"00025f4c1066f619","type":"link out","z":"152a4a9b90c79d8f","name":"link out 765","mode":"link","links":["8208216f86edead9"],"x":485,"y":560,"wires":[]},{"id":"a24853a72263c75b","type":"link out","z":"152a4a9b90c79d8f","name":"link out 766","mode":"link","links":["0b56208eb6802831","08048b83ad0d1981"],"x":885,"y":120,"wires":[]},{"id":"0b56208eb6802831","type":"link in","z":"152a4a9b90c79d8f","name":"link in 512","links":["a24853a72263c75b"],"x":165,"y":160,"wires":[["50886d7708cc2a86"]]},{"id":"08048b83ad0d1981","type":"link in","z":"152a4a9b90c79d8f","name":"link in 513","links":["a24853a72263c75b"],"x":1515,"y":120,"wires":[[]]},{"id":"7b4c53e40d3a28c3","type":"api-current-state","z":"152a4a9b90c79d8f","name":"spectrum","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Spectrum","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":220,"y":580,"wires":[["75fa1d75a1bba42d"],[]]},{"id":"a34f2dfae99b9c37","type":"link out","z":"152a4a9b90c79d8f","name":"link out 767","mode":"link","links":["87109453e7b468e9"],"x":845,"y":660,"wires":[]},{"id":"87109453e7b468e9","type":"link in","z":"152a4a9b90c79d8f","name":"link in 514","links":["a34f2dfae99b9c37"],"x":115,"y":720,"wires":[["69389afc1247ccaa"]]},{"id":"286489b473f1fb2e","type":"link out","z":"152a4a9b90c79d8f","name":"link out 768","mode":"link","links":["27e1b16b937f127c"],"x":485,"y":600,"wires":[]},{"id":"27e1b16b937f127c","type":"link in","z":"152a4a9b90c79d8f","name":"link in 515","links":["286489b473f1fb2e"],"x":115,"y":660,"wires":[["2f806f6a7c3336fd"]]},{"id":"08f446040ce0383e","type":"api-current-state","z":"152a4a9b90c79d8f","name":"target 0","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"0","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.light_scene_spectrum_target_hue","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":680,"y":480,"wires":[["6757286c8e4a2ae4"],["2be4b6963cec3b84"]]},{"id":"f078ba5a751f94a5","type":"api-call-service","z":"152a4a9b90c79d8f","name":"entities","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{reference_light}}"],"data":"{}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1000,"y":460,"wires":[["0a65fb35c6d74835"]]},{"id":"0a65fb35c6d74835","type":"delay","z":"152a4a9b90c79d8f","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1140,"y":460,"wires":[["d85f449a4421a7e7"]]},{"id":"d85f449a4421a7e7","type":"api-call-service","z":"152a4a9b90c79d8f","name":"auto","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{auto}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1270,"y":460,"wires":[[]]},{"id":"c7edda5564ede214","type":"link out","z":"152a4a9b90c79d8f","name":"link out 769","mode":"link","links":["800533b296f428c2"],"x":955,"y":240,"wires":[]},{"id":"800533b296f428c2","type":"link in","z":"152a4a9b90c79d8f","name":"link in 516","links":["c7edda5564ede214","ad2f1dda6ee319a0","4d7b6c754ecddadd"],"x":115,"y":480,"wires":[["bc74d9232317ce56"]]},{"id":"ad2f1dda6ee319a0","type":"link out","z":"152a4a9b90c79d8f","name":"link out 770","mode":"link","links":["800533b296f428c2"],"x":475,"y":720,"wires":[]},{"id":"4d7b6c754ecddadd","type":"link out","z":"152a4a9b90c79d8f","name":"link out 771","mode":"link","links":["800533b296f428c2"],"x":675,"y":320,"wires":[]},{"id":"bc74d9232317ce56","type":"delay","z":"152a4a9b90c79d8f","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":220,"y":480,"wires":[["cfad07be04596619"]]},{"id":"cfad07be04596619","type":"api-call-service","z":"152a4a9b90c79d8f","name":"update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":360,"y":480,"wires":[["e0f0d5b960642bd8"]]},{"id":"92a30aa8b463ac57","type":"api-current-state","z":"152a4a9b90c79d8f","name":"light on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":460,"wires":[["f078ba5a751f94a5"],[]]},{"id":"b5e5caee09a29865","type":"junction","z":"152a4a9b90c79d8f","x":120,"y":260,"wires":[["01ea6d3bce8bdd85"]]},{"id":"d520852b8647d318","type":"junction","z":"152a4a9b90c79d8f","x":620,"y":460,"wires":[["6757286c8e4a2ae4"]]},{"id":"6757286c8e4a2ae4","type":"junction","z":"152a4a9b90c79d8f","x":780,"y":460,"wires":[["92a30aa8b463ac57"]]},{"id":"82bebc3a26047b8f","type":"subflow","name":"front room lights auto","info":"","category":"","in":[{"x":90,"y":100,"wires":[{"id":"c097aea9f899a995"}]}],"out":[{"x":440,"y":120,"wires":[{"id":"19934da6d702b03d","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":440,"y":80,"wires":[{"id":"19934da6d702b03d","port":0}]}},{"id":"2cfcc82b721af031","type":"trigger","z":"82bebc3a26047b8f","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1190,"y":440,"wires":[["ba0d0cfae24d403f"]]},{"id":"4fa4516ab7f00e2c","type":"api-current-state","z":"82bebc3a26047b8f","name":"dining room lights on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_dining_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":340,"y":360,"wires":[["9c6de08232ea1a98"],["9f291e911abcdc3f"]]},{"id":"89ad2dc6fc91bb4a","type":"api-current-state","z":"82bebc3a26047b8f","name":"dining room lights undefined","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Undefined","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.dining_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":360,"wires":[["9f291e911abcdc3f"],["2cfcc82b721af031"]]},{"id":"35ccd702e20c1c6e","type":"change","z":"82bebc3a26047b8f","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"},{"t":"set","p":"light_scene","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":2090,"y":480,"wires":[["ee588e67605b2de6"]]},{"id":"22819fd6a8034422","type":"change","z":"82bebc3a26047b8f","name":"night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":280,"wires":[["ee588e67605b2de6"]]},{"id":"03a4602b500517a6","type":"change","z":"82bebc3a26047b8f","name":"low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":320,"wires":[["ee588e67605b2de6"]]},{"id":"8020d1c0f70465d3","type":"change","z":"82bebc3a26047b8f","name":"soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":360,"wires":[["ee588e67605b2de6"]]},{"id":"0754a5120f81850a","type":"change","z":"82bebc3a26047b8f","name":"normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":400,"wires":[["ee588e67605b2de6"]]},{"id":"2ce50fd14e23a543","type":"switch","z":"82bebc3a26047b8f","name":"random","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Random","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1920,"y":460,"wires":[["7295e63ff38df625"],["35ccd702e20c1c6e"]]},{"id":"7295e63ff38df625","type":"change","z":"82bebc3a26047b8f","name":"shuffle","rules":[{"t":"set","p":"payload","pt":"msg","to":"Shuffle","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Shuffle","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":440,"wires":[["ee588e67605b2de6"]]},{"id":"72b0f3dff4dda448","type":"link in","z":"82bebc3a26047b8f","name":"link in 341","links":["78083a4218855d82","a86b5f63b429ee14"],"x":1725,"y":400,"wires":[["56edd6aa4f71f8a7"]]},{"id":"a7aa41f7f3f0338c","type":"link in","z":"82bebc3a26047b8f","name":"link in 342","links":["55854324e102f2fc","4a91e7274b3c9936"],"x":1725,"y":360,"wires":[["133183091665f0c9"]]},{"id":"ba0d0cfae24d403f","type":"link out","z":"82bebc3a26047b8f","name":"link out 392","mode":"link","links":["a13ead60f5b51692"],"x":1315,"y":440,"wires":[]},{"id":"a13ead60f5b51692","type":"link in","z":"82bebc3a26047b8f","name":"link in 343","links":["ba0d0cfae24d403f","d64538a93653b94e"],"x":1725,"y":460,"wires":[["e8a0dc5c67a4fb1c"]]},{"id":"f13552e2e3e244a0","type":"link out","z":"82bebc3a26047b8f","name":"link out 393","mode":"link","links":["77f4047da0c3aeeb"],"x":2305,"y":360,"wires":[]},{"id":"77f4047da0c3aeeb","type":"link in","z":"82bebc3a26047b8f","name":"link in 344","links":["f13552e2e3e244a0","e79ab36afe6b5a77"],"x":305,"y":100,"wires":[["19934da6d702b03d"]]},{"id":"fd130eac68085b13","type":"link out","z":"82bebc3a26047b8f","name":"link out 394","mode":"link","links":["35daae11d414d90d","90023bc514c8ee90","06731df510ec73f4"],"x":175,"y":100,"wires":[]},{"id":"35daae11d414d90d","type":"link in","z":"82bebc3a26047b8f","name":"link in 345","links":["fd130eac68085b13"],"x":75,"y":300,"wires":[["7197d954f7898bf0"]]},{"id":"9c6de08232ea1a98","type":"change","z":"82bebc3a26047b8f","name":"brightness","rules":[{"t":"set","p":"front_room.set.brightness","pt":"global","to":"data.attributes.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":360,"wires":[["89ad2dc6fc91bb4a"]]},{"id":"83ac3755050b368b","type":"trigger","z":"82bebc3a26047b8f","name":"normal","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1250,"y":560,"wires":[["a86b5f63b429ee14"]]},{"id":"f916f3d095c65ec7","type":"trigger","z":"82bebc3a26047b8f","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1270,"y":680,"wires":[["d64538a93653b94e"]]},{"id":"2db8f51e1319cf37","type":"trigger","z":"82bebc3a26047b8f","name":"soft","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1250,"y":600,"wires":[["4a91e7274b3c9936"]]},{"id":"8a05bc0c4fe93913","type":"trigger","z":"82bebc3a26047b8f","name":"night","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1250,"y":640,"wires":[["80e9a5011ad68954"]]},{"id":"31c009b77b0ce066","type":"api-current-state","z":"82bebc3a26047b8f","name":"daytime","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.daytime","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":0,"forType":"num","forUnits":"minutes","x":320,"y":560,"wires":[["83ac3755050b368b"],["64d420cd4f73969a"]]},{"id":"a86b5f63b429ee14","type":"link out","z":"82bebc3a26047b8f","name":"link out 395","mode":"link","links":["72b0f3dff4dda448","88dd17b005d6fac4"],"x":1375,"y":560,"wires":[]},{"id":"4a91e7274b3c9936","type":"link out","z":"82bebc3a26047b8f","name":"link out 396","mode":"link","links":["a7aa41f7f3f0338c","4b25a4c339cc0f92"],"x":1375,"y":600,"wires":[]},{"id":"d64538a93653b94e","type":"link out","z":"82bebc3a26047b8f","name":"link out 397","mode":"link","links":["a13ead60f5b51692","2ef3a22df0eaac8a"],"x":1375,"y":680,"wires":[]},{"id":"80e9a5011ad68954","type":"link out","z":"82bebc3a26047b8f","name":"link out 398","mode":"link","links":["f73d14239ff8ed7d","3e7cb2a84e845029"],"x":1375,"y":640,"wires":[]},{"id":"f73d14239ff8ed7d","type":"link in","z":"82bebc3a26047b8f","name":"link in 346","links":["80e9a5011ad68954"],"x":1725,"y":280,"wires":[["802aa3a89362ad8a"]]},{"id":"f184bc8b3e29b505","type":"api-current-state","z":"82bebc3a26047b8f","name":"front room lights off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_front_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":290,"y":300,"wires":[["31650b7399485f97"],["4fa4516ab7f00e2c"]]},{"id":"a773762a7a018d97","type":"link out","z":"82bebc3a26047b8f","name":"link out 399","mode":"link","links":["1b0ba76bede942f5"],"x":1325,"y":280,"wires":[]},{"id":"1b0ba76bede942f5","type":"link in","z":"82bebc3a26047b8f","name":"link in 347","links":["a773762a7a018d97","659e61b90f7559db"],"x":115,"y":560,"wires":[["31c009b77b0ce066"]]},{"id":"9f291e911abcdc3f","type":"api-current-state","z":"82bebc3a26047b8f","name":"living room lights on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_living_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":340,"y":400,"wires":[["949d934686ae0a1d"],["31650b7399485f97"]]},{"id":"8b0f303c9c1eef05","type":"api-current-state","z":"82bebc3a26047b8f","name":"living room lights undefined","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Undefined","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.living_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":400,"wires":[["b5b493c44fad6dcb"],["2cfcc82b721af031"]]},{"id":"949d934686ae0a1d","type":"change","z":"82bebc3a26047b8f","name":"brightness","rules":[{"t":"set","p":"front_room.set.brightness","pt":"global","to":"data.attributes.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":400,"wires":[["8b0f303c9c1eef05"]]},{"id":"64d420cd4f73969a","type":"api-current-state","z":"82bebc3a26047b8f","name":"office lights on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_office_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":240,"y":600,"wires":[["9a31707192d72182"],["dab57795a4eac098"]]},{"id":"9a31707192d72182","type":"change","z":"82bebc3a26047b8f","name":"brightness","rules":[{"t":"set","p":"front_room.set.brightness","pt":"global","to":"data.attributes.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":600,"wires":[["3d5905820882fdbf"]]},{"id":"3d5905820882fdbf","type":"api-current-state","z":"82bebc3a26047b8f","name":"office lights undefined","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Undefined","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.office_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":660,"y":600,"wires":[["90494ba79585db3e"],["0eb1343b6639e88d"]]},{"id":"2b9f18234c67197c","type":"api-current-state","z":"82bebc3a26047b8f","name":"kitchen lights undefined","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Undefined","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.kitchen_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":760,"wires":[["862fe43d3f34fcd8"],["0eb1343b6639e88d"]]},{"id":"1248c8e7d9014653","type":"change","z":"82bebc3a26047b8f","name":"brightness","rules":[{"t":"set","p":"front_room.set.brightness","pt":"global","to":"data.attributes.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":760,"wires":[["2b9f18234c67197c"]]},{"id":"858c95f5d1699a12","type":"api-current-state","z":"82bebc3a26047b8f","name":"kitchen lights on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_kitchen_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":240,"y":760,"wires":[["1248c8e7d9014653"],["6b2c598b7687b4b9"]]},{"id":"a6d6be8c594fe437","type":"api-current-state","z":"82bebc3a26047b8f","name":"bedroom lights on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_bedroom_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":670,"y":680,"wires":[["3b884f21d81efb23"],["9ad8d28b5b282363"]]},{"id":"12f890906848b2bb","type":"api-current-state","z":"82bebc3a26047b8f","name":"wardrobe input bypass off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.wardrobe_light_bypass_input","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":700,"wires":[["a6d6be8c594fe437"],["5e1d56f148da7343"]]},{"id":"3b884f21d81efb23","type":"change","z":"82bebc3a26047b8f","name":"brightness","rules":[{"t":"set","p":"master_bathroom.set.brightness","pt":"global","to":"data.attributes.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":640,"wires":[["430adf98d3d01339"]]},{"id":"430adf98d3d01339","type":"api-current-state","z":"82bebc3a26047b8f","name":"bedroom lights undefined","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Undefined","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.bedroom_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":640,"wires":[["9ad8d28b5b282363"],["0eb1343b6639e88d"]]},{"id":"5e1d56f148da7343","type":"api-current-state","z":"82bebc3a26047b8f","name":"bedroom lights off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"Off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.bedroom_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":720,"wires":[["9ad8d28b5b282363"],["0eb1343b6639e88d"]]},{"id":"9ad8d28b5b282363","type":"link out","z":"82bebc3a26047b8f","name":"link out 437","mode":"link","links":["5ffdd4395b051321"],"x":895,"y":700,"wires":[]},{"id":"5ffdd4395b051321","type":"link in","z":"82bebc3a26047b8f","name":"link in 377","links":["9ad8d28b5b282363"],"x":115,"y":760,"wires":[["858c95f5d1699a12"]]},{"id":"90494ba79585db3e","type":"link out","z":"82bebc3a26047b8f","name":"link out 438","mode":"link","links":["0d671ac3ef0aaa96"],"x":895,"y":660,"wires":[]},{"id":"0d671ac3ef0aaa96","type":"link in","z":"82bebc3a26047b8f","name":"link in 378","links":["90494ba79585db3e"],"x":115,"y":700,"wires":[["12f890906848b2bb"]]},{"id":"5cac0990994a828f","type":"switch","z":"82bebc3a26047b8f","name":"time of day","property":"time_of_day","propertyType":"global","rules":[{"t":"cont","v":"Morning","vt":"str"},{"t":"cont","v":"Afternoon","vt":"str"},{"t":"cont","v":"Evening","vt":"str"},{"t":"eq","v":"Night","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":1010,"y":620,"wires":[["83ac3755050b368b"],["83ac3755050b368b"],["2db8f51e1319cf37"],["8a05bc0c4fe93913"]]},{"id":"ee588e67605b2de6","type":"junction","z":"82bebc3a26047b8f","x":2240,"y":360,"wires":[["f13552e2e3e244a0"]]},{"id":"133183091665f0c9","type":"junction","z":"82bebc3a26047b8f","x":1780,"y":360,"wires":[["8020d1c0f70465d3"]]},{"id":"56edd6aa4f71f8a7","type":"junction","z":"82bebc3a26047b8f","x":1780,"y":400,"wires":[["0754a5120f81850a"]]},{"id":"e8a0dc5c67a4fb1c","type":"junction","z":"82bebc3a26047b8f","x":1780,"y":460,"wires":[["2ce50fd14e23a543"]]},{"id":"19934da6d702b03d","type":"junction","z":"82bebc3a26047b8f","x":360,"y":100,"wires":[[]]},{"id":"c097aea9f899a995","type":"junction","z":"82bebc3a26047b8f","x":130,"y":100,"wires":[["fd130eac68085b13"]]},{"id":"7197d954f7898bf0","type":"junction","z":"82bebc3a26047b8f","x":150,"y":300,"wires":[["f184bc8b3e29b505"]]},{"id":"802aa3a89362ad8a","type":"junction","z":"82bebc3a26047b8f","x":1780,"y":280,"wires":[["22819fd6a8034422"]]},{"id":"b5b493c44fad6dcb","type":"junction","z":"82bebc3a26047b8f","x":1240,"y":280,"wires":[["a773762a7a018d97"]]},{"id":"31650b7399485f97","type":"junction","z":"82bebc3a26047b8f","x":540,"y":280,"wires":[["b5b493c44fad6dcb"]]},{"id":"862fe43d3f34fcd8","type":"junction","z":"82bebc3a26047b8f","x":880,"y":620,"wires":[["5cac0990994a828f"]]},{"id":"6b2c598b7687b4b9","type":"junction","z":"82bebc3a26047b8f","x":380,"y":780,"wires":[["c63d3f3dad1438f4"]]},{"id":"0eb1343b6639e88d","type":"junction","z":"82bebc3a26047b8f","x":880,"y":680,"wires":[["f916f3d095c65ec7"]]},{"id":"dab57795a4eac098","type":"junction","z":"82bebc3a26047b8f","x":380,"y":620,"wires":[["9403c1cd94dfacdb"]]},{"id":"9403c1cd94dfacdb","type":"junction","z":"82bebc3a26047b8f","x":760,"y":620,"wires":[["90494ba79585db3e"]]},{"id":"c63d3f3dad1438f4","type":"junction","z":"82bebc3a26047b8f","x":760,"y":780,"wires":[["862fe43d3f34fcd8"]]},{"id":"53e63bb5b2c59e08","type":"subflow","name":"light called","info":"","category":"","in":[{"x":100,"y":120,"wires":[{"id":"189e9a57dc3ed113"}]}],"out":[{"x":1000,"y":220,"wires":[{"id":"9400d8b6685cda4a","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":1000,"y":140,"wires":[{"id":"629e9f1d3caf9b01","port":0}]}},{"id":"67d3fc15c5665be2","type":"api-current-state","z":"53e63bb5b2c59e08","name":"is called","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{called}}","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":220,"y":700,"wires":[["5c360be05ebf760d"],["d828793f93b9b176"]]},{"id":"d8e8a5f1fc8ec0e8","type":"api-call-service","z":"53e63bb5b2c59e08","name":"set called","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{called}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"msg"}],"queue":"none","x":1200,"y":740,"wires":[["ce29a10a01ff5899"]]},{"id":"253a91d85eeb74b2","type":"switch","z":"53e63bb5b2c59e08","name":"filter","property":"light_scene","propertyType":"msg","rules":[{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"On","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"eq","v":"Random","vt":"str"},{"t":"eq","v":"Turn On","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":7,"x":230,"y":120,"wires":[["781654fe9b02b18d"],["781654fe9b02b18d"],["781654fe9b02b18d"],["781654fe9b02b18d"],["781654fe9b02b18d"],["8e5556d94b7bc70f"],["089106764faad376"]]},{"id":"7523a4ac6efb2622","type":"api-call-service","z":"53e63bb5b2c59e08","name":"turn on auto","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{auto}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1190,"y":560,"wires":[["071937eed4f386f6"]]},{"id":"5195c5f8e2701aba","type":"ha-wait-until","z":"53e63bb5b2c59e08","name":"","server":"e14e0276.68398","version":2,"outputs":2,"entityId":"{{called}}","entityIdFilterType":"exact","property":"state","comparator":"is","value":"off","valueType":"str","timeout":"15","timeoutType":"num","timeoutUnits":"seconds","checkCurrentState":true,"blockInputOverrides":false,"outputProperties":[],"x":560,"y":680,"wires":[["f7f3dda346ecd633"],["3002eda9d490b39e"]]},{"id":"20483d5cd15a3413","type":"api-current-state","z":"53e63bb5b2c59e08","name":"is called","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{called}}","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":360,"y":500,"wires":[["ebbac9b0a9830308"],["c9ceebc6d477f040"]]},{"id":"ebbac9b0a9830308","type":"ha-wait-until","z":"53e63bb5b2c59e08","name":"","server":"e14e0276.68398","version":2,"outputs":2,"entityId":"{{called}}","entityIdFilterType":"exact","property":"state","comparator":"is","value":"off","valueType":"str","timeout":"15","timeoutType":"num","timeoutUnits":"seconds","checkCurrentState":true,"blockInputOverrides":false,"outputProperties":[],"x":540,"y":460,"wires":[["850d9cbd5ed538ae"],["53f131bd3b990394"]]},{"id":"08046053499a4d33","type":"trigger","z":"53e63bb5b2c59e08","name":"ignore","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1210,"y":400,"wires":[["99b3fecfbfb53db0"]]},{"id":"24d1e6af79523e98","type":"api-call-service","z":"53e63bb5b2c59e08","name":"call update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1190,"y":480,"wires":[["8d420671f93851db"]]},{"id":"d22589b5abe1c197","type":"link out","z":"53e63bb5b2c59e08","name":"link out 226","mode":"link","links":["ed2ecb83c1566801"],"x":1295,"y":440,"wires":[]},{"id":"ed2ecb83c1566801","type":"link in","z":"53e63bb5b2c59e08","name":"link in 204","links":["d22589b5abe1c197"],"x":395,"y":540,"wires":[["c9ceebc6d477f040"]]},{"id":"57113f55c84c51d3","type":"link out","z":"53e63bb5b2c59e08","name":"link out 227","mode":"link","links":["4110a59258705328"],"x":1295,"y":660,"wires":[]},{"id":"4110a59258705328","type":"link in","z":"53e63bb5b2c59e08","name":"link in 205","links":["57113f55c84c51d3"],"x":265,"y":740,"wires":[["d828793f93b9b176"]]},{"id":"ea2931693ce2b37e","type":"api-call-service","z":"53e63bb5b2c59e08","name":"call update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1190,"y":700,"wires":[["8b624cdea055e025"]]},{"id":"6359717a90558123","type":"change","z":"53e63bb5b2c59e08","name":"timeout","rules":[{"t":"set","p":"payload","pt":"msg","to":"timeout","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":100,"wires":[["0750873efe66b980"]]},{"id":"66daa8c2b2627240","type":"change","z":"53e63bb5b2c59e08","name":"ignore","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":60,"wires":[["0750873efe66b980"]]},{"id":"ce29a10a01ff5899","type":"link out","z":"53e63bb5b2c59e08","name":"link out 266","mode":"link","links":["5c8cda3cf37986f0"],"x":1295,"y":740,"wires":[]},{"id":"5c8cda3cf37986f0","type":"link in","z":"53e63bb5b2c59e08","name":"link in 240","links":["ce29a10a01ff5899","f820cf63324559aa","b142093d43c5c299"],"x":645,"y":220,"wires":[["2ee57a5b1326c094"]]},{"id":"8d420671f93851db","type":"link out","z":"53e63bb5b2c59e08","name":"link out 268","mode":"link","links":["1133ff973bc5d191"],"x":1295,"y":480,"wires":[]},{"id":"8b624cdea055e025","type":"link out","z":"53e63bb5b2c59e08","name":"link out 269","mode":"link","links":["1133ff973bc5d191"],"x":1295,"y":700,"wires":[]},{"id":"1133ff973bc5d191","type":"link in","z":"53e63bb5b2c59e08","name":"link in 243","links":["8b624cdea055e025","8d420671f93851db","de6a407ec52c49af"],"x":645,"y":100,"wires":[["6359717a90558123"]]},{"id":"99b3fecfbfb53db0","type":"link out","z":"53e63bb5b2c59e08","name":"link out 270","mode":"link","links":["3cbb8f8f1c2196ac"],"x":1295,"y":400,"wires":[]},{"id":"3cbb8f8f1c2196ac","type":"link in","z":"53e63bb5b2c59e08","name":"link in 244","links":["99b3fecfbfb53db0"],"x":645,"y":60,"wires":[["66daa8c2b2627240"]]},{"id":"83ada363337a3c3a","type":"change","z":"53e63bb5b2c59e08","name":"auto","rules":[{"t":"set","p":"payload","pt":"msg","to":"auto","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":140,"wires":[["0750873efe66b980"]]},{"id":"071937eed4f386f6","type":"link out","z":"53e63bb5b2c59e08","name":"link out 271","mode":"link","links":["61013a438c70fd82"],"x":1295,"y":560,"wires":[]},{"id":"61013a438c70fd82","type":"link in","z":"53e63bb5b2c59e08","name":"link in 245","links":["071937eed4f386f6"],"x":645,"y":140,"wires":[["83ada363337a3c3a"]]},{"id":"5c360be05ebf760d","type":"switch","z":"53e63bb5b2c59e08","name":"new scene","property":"change","propertyType":"msg","rules":[{"t":"eq","v":"light_scene","vt":"msg"},{"t":"empty"},{"t":"null"},{"t":"else"}],"checkall":"false","repair":false,"outputs":4,"x":390,"y":660,"wires":[["78a9cfd9c7836d7b"],["0e26014943391833"],["0e26014943391833"],["0e26014943391833"]]},{"id":"29c9ae40788feed8","type":"link out","z":"53e63bb5b2c59e08","name":"link out 292","mode":"link","links":["e3d0b43d5d8e812d"],"x":1295,"y":620,"wires":[]},{"id":"e3d0b43d5d8e812d","type":"link in","z":"53e63bb5b2c59e08","name":"link in 263","links":["29c9ae40788feed8","6cbb7a98769f3cc6"],"x":645,"y":180,"wires":[["8ab3b6fcf1767169"]]},{"id":"8ab3b6fcf1767169","type":"change","z":"53e63bb5b2c59e08","name":"called","rules":[{"t":"set","p":"payload","pt":"msg","to":"called","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":180,"wires":[["0750873efe66b980"]]},{"id":"9e63c1fea3f14c52","type":"trigger","z":"53e63bb5b2c59e08","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1200,"y":440,"wires":[["d22589b5abe1c197"]]},{"id":"332efd5ef422b8ed","type":"trigger","z":"53e63bb5b2c59e08","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1200,"y":660,"wires":[["57113f55c84c51d3"]]},{"id":"53f131bd3b990394","type":"api-current-state","z":"53e63bb5b2c59e08","name":"update on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{update}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":480,"wires":[["e91de9da4fa95ae8"],["396dd198aecba66d"]]},{"id":"e91de9da4fa95ae8","type":"api-call-service","z":"53e63bb5b2c59e08","name":"update off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":890,"y":480,"wires":[["678a11a4f372f7be"]]},{"id":"678a11a4f372f7be","type":"delay","z":"53e63bb5b2c59e08","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1040,"y":480,"wires":[["24d1e6af79523e98"]]},{"id":"3002eda9d490b39e","type":"api-current-state","z":"53e63bb5b2c59e08","name":"update on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{update}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":700,"wires":[["6de7835b5dfb777b"],["b5ce3dd27c673485"]]},{"id":"6de7835b5dfb777b","type":"api-call-service","z":"53e63bb5b2c59e08","name":"update off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":890,"y":700,"wires":[["462003154a1ae7ee"]]},{"id":"462003154a1ae7ee","type":"delay","z":"53e63bb5b2c59e08","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1040,"y":700,"wires":[["ea2931693ce2b37e"]]},{"id":"97b7c33bd5c308db","type":"switch","z":"53e63bb5b2c59e08","name":"type","property":"type","propertyType":"msg","rules":[{"t":"eq","v":"on_off","vt":"str"},{"t":"empty"},{"t":"null"},{"t":"else"}],"checkall":"false","repair":false,"outputs":4,"x":1010,"y":540,"wires":[["d75a5e0929e36b1d"],["216e80257058ae11"],["216e80257058ae11"],["216e80257058ae11"]]},{"id":"2ee57a5b1326c094","type":"change","z":"53e63bb5b2c59e08","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":220,"wires":[["16465eec0ffacbb0"]]},{"id":"d75a5e0929e36b1d","type":"api-call-service","z":"53e63bb5b2c59e08","name":"set called","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{called}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"msg"}],"queue":"none","x":1200,"y":520,"wires":[["b142093d43c5c299"]]},{"id":"b142093d43c5c299","type":"link out","z":"53e63bb5b2c59e08","name":"link out 375","mode":"link","links":["5c8cda3cf37986f0"],"x":1295,"y":520,"wires":[]},{"id":"7f1ca3f1f88294d7","type":"api-call-service","z":"53e63bb5b2c59e08","name":"update input select","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"update_entity","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1050,"y":400,"wires":[["08046053499a4d33"]]},{"id":"13ec3db8da1f69fc","type":"link out","z":"53e63bb5b2c59e08","name":"link out 818","mode":"link","links":["395a0b17275b4ee3"],"x":425,"y":100,"wires":[]},{"id":"395a0b17275b4ee3","type":"link in","z":"53e63bb5b2c59e08","name":"link in 567","links":["13ec3db8da1f69fc"],"x":115,"y":400,"wires":[["7f1ca3f1f88294d7"]]},{"id":"8e5556d94b7bc70f","type":"link out","z":"53e63bb5b2c59e08","name":"link out 819","mode":"link","links":["e72c315ca6fce07f"],"x":425,"y":140,"wires":[]},{"id":"e72c315ca6fce07f","type":"link in","z":"53e63bb5b2c59e08","name":"link in 568","links":["8e5556d94b7bc70f"],"x":115,"y":500,"wires":[["20483d5cd15a3413"]]},{"id":"089106764faad376","type":"link out","z":"53e63bb5b2c59e08","name":"link out 820","mode":"link","links":["fb3e8871698378f1"],"x":425,"y":180,"wires":[]},{"id":"fb3e8871698378f1","type":"link in","z":"53e63bb5b2c59e08","name":"link in 569","links":["089106764faad376"],"x":115,"y":700,"wires":[["67d3fc15c5665be2"]]},{"id":"781654fe9b02b18d","type":"junction","z":"53e63bb5b2c59e08","x":340,"y":100,"wires":[["13ec3db8da1f69fc"]]},{"id":"c9ceebc6d477f040","type":"junction","z":"53e63bb5b2c59e08","x":480,"y":540,"wires":[["97b7c33bd5c308db"]]},{"id":"d828793f93b9b176","type":"junction","z":"53e63bb5b2c59e08","x":320,"y":740,"wires":[["d8e8a5f1fc8ec0e8"]]},{"id":"0750873efe66b980","type":"junction","z":"53e63bb5b2c59e08","x":920,"y":140,"wires":[["629e9f1d3caf9b01"]]},{"id":"189e9a57dc3ed113","type":"junction","z":"53e63bb5b2c59e08","x":140,"y":120,"wires":[["253a91d85eeb74b2"]]},{"id":"9400d8b6685cda4a","type":"junction","z":"53e63bb5b2c59e08","x":940,"y":220,"wires":[[]]},{"id":"629e9f1d3caf9b01","type":"junction","z":"53e63bb5b2c59e08","x":940,"y":140,"wires":[[]]},{"id":"0e26014943391833","type":"junction","z":"53e63bb5b2c59e08","x":480,"y":680,"wires":[["5195c5f8e2701aba"]]},{"id":"16465eec0ffacbb0","type":"junction","z":"53e63bb5b2c59e08","x":840,"y":220,"wires":[["9400d8b6685cda4a","0750873efe66b980"]]},{"id":"216e80257058ae11","type":"junction","z":"53e63bb5b2c59e08","x":1080,"y":560,"wires":[["7523a4ac6efb2622"]]},{"id":"396dd198aecba66d","type":"junction","z":"53e63bb5b2c59e08","x":820,"y":500,"wires":[["57754224cd16a928"]]},{"id":"57754224cd16a928","type":"junction","z":"53e63bb5b2c59e08","x":1100,"y":500,"wires":[["24d1e6af79523e98"]]},{"id":"850d9cbd5ed538ae","type":"junction","z":"53e63bb5b2c59e08","x":640,"y":440,"wires":[["9e63c1fea3f14c52"]]},{"id":"78a9cfd9c7836d7b","type":"junction","z":"53e63bb5b2c59e08","x":500,"y":620,"wires":[["29c9ae40788feed8"]]},{"id":"b5ce3dd27c673485","type":"junction","z":"53e63bb5b2c59e08","x":820,"y":720,"wires":[["e87ea281482d9045"]]},{"id":"e87ea281482d9045","type":"junction","z":"53e63bb5b2c59e08","x":1100,"y":720,"wires":[["ea2931693ce2b37e"]]},{"id":"f7f3dda346ecd633","type":"junction","z":"53e63bb5b2c59e08","x":660,"y":660,"wires":[["332efd5ef422b8ed"]]},{"id":"f23ba93a1cb512ee","type":"subflow","name":"credenza lamp variables","info":"","category":"","in":[{"x":0,"y":80,"wires":[{"id":"0d598b98479f9d6b"}]}],"out":[{"x":380,"y":80,"wires":[{"id":"0d598b98479f9d6b","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"0d598b98479f9d6b","type":"change","z":"f23ba93a1cb512ee","name":"credenza lamp variables","rules":[{"t":"set","p":"topic","pt":"msg","to":"input_select.credenza_lamp","tot":"str"},{"t":"set","p":"light","pt":"msg","to":"light.credenza_lamp","tot":"str"},{"t":"set","p":"reference_light","pt":"msg","to":"light.group_credenza_lamp","tot":"str"},{"t":"set","p":"auto","pt":"msg","to":"input_boolean.credenza_lamp_auto","tot":"str"},{"t":"set","p":"called","pt":"msg","to":"input_boolean.credenza_lamp_called","tot":"str"},{"t":"set","p":"undefined","pt":"msg","to":"input_boolean.credenza_lamp_undefined","tot":"str"},{"t":"set","p":"update","pt":"msg","to":"input_boolean.credenza_lamp_update","tot":"str"},{"t":"set","p":"parent","pt":"msg","to":"input_boolean.dining_room_lights_update","tot":"str"},{"t":"set","p":"active","pt":"msg","to":"input_select.credenza_lamp.scene","tot":"global"},{"t":"set","p":"saved","pt":"msg","to":"input_select.credenza_lamp.saved","tot":"global"},{"t":"set","p":"change","pt":"msg","to":"input_select.credenza_lamp.change","tot":"global"},{"t":"set","p":"brightness","pt":"msg","to":"front_room.set.brightness","tot":"global"},{"t":"set","p":"hue_zone","pt":"msg","to":"Front Room","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":80,"wires":[[]]},{"id":"dc70039186c82a4c","type":"subflow","name":"light scene","info":"","category":"light scene templates","in":[{"x":60,"y":80,"wires":[{"id":"6f88c8acd361b1a1"}]}],"out":[{"x":440,"y":100,"wires":[{"id":"c019446955e3ee5d","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":440,"y":60,"wires":[{"id":"6f88c8acd361b1a1","port":0}]}},{"id":"c019446955e3ee5d","type":"template","z":"dc70039186c82a4c","name":"light scene","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\":{\n        \"option\" : \"{{light_scene}}\"\n    }\n}","output":"json","x":270,"y":100,"wires":[[]],"icon":"node-red-contrib-color-convert/color-convert.png"},{"id":"6f88c8acd361b1a1","type":"change","z":"dc70039186c82a4c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":60,"wires":[["c019446955e3ee5d"]]},{"id":"45883e65178bf769","type":"subflow","name":"standard scene","info":"","category":"light scenes","in":[{"x":60,"y":80,"wires":[{"id":"3acd159933dcbbae"}]}],"out":[{"x":320,"y":80,"wires":[{"id":"3acd159933dcbbae","port":0},{"id":"3acd159933dcbbae","port":1},{"id":"3acd159933dcbbae","port":2},{"id":"3acd159933dcbbae","port":3},{"id":"3acd159933dcbbae","port":4},{"id":"3acd159933dcbbae","port":5},{"id":"3acd159933dcbbae","port":6},{"id":"3acd159933dcbbae","port":7},{"id":"3acd159933dcbbae","port":8}]},{"x":320,"y":160,"wires":[{"id":"3acd159933dcbbae","port":9}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"3acd159933dcbbae","type":"switch","z":"45883e65178bf769","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Maximum","vt":"str"},{"t":"eq","v":"Bright","vt":"str"},{"t":"eq","v":"Normal","vt":"str"},{"t":"eq","v":"Soft","vt":"str"},{"t":"eq","v":"Low","vt":"str"},{"t":"eq","v":"Night","vt":"str"},{"t":"eq","v":"Random","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":10,"x":190,"y":80,"wires":[[],[],[],[],[],[],[],[],[],[]]},{"id":"17e2f5a99394454d","type":"subflow","name":"analyze light (TEMP BYPASS)","info":"","category":"","in":[{"x":60,"y":160,"wires":[{"id":"ea9290af5c1e254e"}]}],"out":[{"x":2660,"y":360,"wires":[{"id":"43d759feb7c9c27d","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":2660,"y":320,"wires":[{"id":"43d759feb7c9c27d","port":0}]}},{"id":"44342b218bca59f5","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon player playing","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"playing","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.patio_fpp_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":260,"y":2220,"wires":[["1d64da2a0764f922"],["bfd5707fa57f002b"]]},{"id":"4c4db0ddc747906d","type":"link in","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"patio light strip","links":["0870145daf2688b4","e03b839270f9a2d9","097c45d678ca6d92","369de87ce0ac8244"],"x":75,"y":1760,"wires":[["61e19677a86a8ab6"]]},{"id":"44dcbbc59c954939","type":"switch","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"brightness","property":"data.attributes.brightness","propertyType":"msg","rules":[{"t":"eq","v":"251","vt":"str"},{"t":"eq","v":"207","vt":"str"},{"t":"eq","v":"159","vt":"str"},{"t":"eq","v":"127","vt":"str"},{"t":"eq","v":"95","vt":"str"},{"t":"eq","v":"63","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":490,"y":2060,"wires":[["59e88871f1d029bb"],["881419645159197f"],["5637cbad192d03e1"],["f49506dedca3c9d0"],["3ae9928cd412727c"],["32f2b6f68b3f45c6"],["afc5e891f8142fcf"]]},{"id":"59e88871f1d029bb","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Maximum","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2160,"wires":[["928f14bf5133cafc"]]},{"id":"881419645159197f","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Bright","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2000,"wires":[["928f14bf5133cafc"]]},{"id":"5637cbad192d03e1","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2040,"wires":[["928f14bf5133cafc"]]},{"id":"f49506dedca3c9d0","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2080,"wires":[["928f14bf5133cafc"]]},{"id":"3ae9928cd412727c","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2120,"wires":[["928f14bf5133cafc"]]},{"id":"32f2b6f68b3f45c6","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2160,"wires":[["928f14bf5133cafc"]]},{"id":"4dbe82ba084c0668","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":2320,"wires":[["5d195463b0f1fef3"]]},{"id":"105a773e5eb27552","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2240,"wires":[["367040a5b9e99f35"]]},{"id":"ba5da38fffd2af56","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon scene","rules":[{"t":"set","p":"payload","pt":"msg","to":"falcon_scene","tot":"msg"},{"t":"set","p":"light_scene","pt":"flow","to":"falcon_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":2200,"wires":[["928f14bf5133cafc"]]},{"id":"bfd5707fa57f002b","type":"switch","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"idle","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"idle","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":2280,"wires":[["ecfc124d41d9a060"],["afc5e891f8142fcf"]]},{"id":"988d4ce71d1a3185","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"undefined","mode":"link","links":["1bd50a4de39ac702","0128d9fa49fce859","63d7d2639514a47e","6511fdcc12b30056"],"x":1375,"y":2320,"wires":[]},{"id":"61e19677a86a8ab6","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":190,"y":1760,"wires":[["84d40407d1bf1882"]]},{"id":"91260ec244813c7e","type":"subflow:c6511c9f3ac2c88f","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"","x":1230,"y":2060,"wires":[["ef86ef02a5b62ab6"]]},{"id":"5d195463b0f1fef3","type":"subflow:fd2ff9f3f5b11066","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":1190,"y":2320,"wires":[["988d4ce71d1a3185"]]},{"id":"e0492f3dc1c4f51a","type":"subflow:2c41a6d36fab0f47","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"","x":1220,"y":2240,"wires":[["aab1e4b5726419f8"]]},{"id":"aab1e4b5726419f8","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"off","mode":"link","links":["62d849f1a3c36380","0bbaf87fb3d567a9","0425dca1d74154e8","7f7bc1be243594dd"],"x":1375,"y":2240,"wires":[]},{"id":"ecfc124d41d9a060","type":"switch","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Off","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":2260,"wires":[["105a773e5eb27552"],["418e4064a6ccb167"]]},{"id":"418e4064a6ccb167","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"Turn Off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Turn Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2280,"wires":[["928f14bf5133cafc"]]},{"id":"84d40407d1bf1882","type":"switch","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":350,"y":1760,"wires":[["7887e7b224241ffd"],["7887e7b224241ffd"],["d6509b3fec26a45f"],["d6509b3fec26a45f"],["d6509b3fec26a45f"],["46fc97e0b8c515fc"]]},{"id":"e1bfdba7dcc7dedb","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"patio strip off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.patio_espixel","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":610,"y":1720,"wires":[["3123f70ccdf89670"],["ff20f79192cbc174"]]},{"id":"3123f70ccdf89670","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon player idle","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.patio_fpp_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":1680,"wires":[["ef5fa0677ff2cd8c"],["365c05c2416aa53b"]]},{"id":"a114f7e48914b536","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"patio strip off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.patio_espixel","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":610,"y":1800,"wires":[["103aefcd4fccf7fd"],["ff20f79192cbc174"]]},{"id":"103aefcd4fccf7fd","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon player idle","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.patio_fpp_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":1760,"wires":[["ef5fa0677ff2cd8c"],["365c05c2416aa53b"]]},{"id":"ef86ef02a5b62ab6","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"defined","mode":"link","links":["2e1b23bb47331c72","71a06f28fe3d11e7","a8941517e8d41437","c352b4a97eb6e42b"],"x":1365,"y":2060,"wires":[]},{"id":"46fc97e0b8c515fc","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"patio strip off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.patio_espixel","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":610,"y":1920,"wires":[["ef3f4f17aeb426f6"],["03d959a036c31ff4"]]},{"id":"03d959a036c31ff4","type":"subflow:45883e65178bf769","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"","x":600,"y":1960,"wires":[["6f2b0dad351366ce"],["ff20f79192cbc174"]]},{"id":"ef3f4f17aeb426f6","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon player idle","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.patio_fpp_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":1840,"wires":[["ef5fa0677ff2cd8c"],["127e421257516cff"]]},{"id":"5e5c80b26daf5305","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"passthrough","mode":"link","links":["4d402d0bce63789c","0a13c54eab6b6c02","bb3df17cf86c7fab","b3527980f02c767f"],"x":1335,"y":1880,"wires":[]},{"id":"ecbedb05a2a9469a","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1880,"wires":[["e253897475d83426"]]},{"id":"ef5fa0677ff2cd8c","type":"change","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1700,"wires":[["367040a5b9e99f35"]]},{"id":"2fc0b80b1b2182b0","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"link out 260","mode":"link","links":["51dec9783ad769f4"],"x":865,"y":1780,"wires":[]},{"id":"72be35f87f1311d0","type":"link out","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"link out 261","mode":"link","links":["018d58693dc547f4"],"x":865,"y":1740,"wires":[]},{"id":"51dec9783ad769f4","type":"link in","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"link in 235","links":["2fc0b80b1b2182b0"],"x":145,"y":2060,"wires":[["44dcbbc59c954939"]]},{"id":"127e421257516cff","type":"switch","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"source","property":"data.attributes.source","propertyType":"msg","rules":[{"t":"eq","v":"light_scene","vt":"flow"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":1880,"wires":[["6f2b0dad351366ce"],["365c05c2416aa53b"]]},{"id":"018d58693dc547f4","type":"link in","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"link in 236","links":["72be35f87f1311d0"],"x":125,"y":2220,"wires":[["44342b218bca59f5"]]},{"id":"1d64da2a0764f922","type":"api-current-state","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"falcon player scene","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.patio_fpp_name_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"falcon_scene","propertyType":"msg","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":470,"y":2200,"wires":[["ba5da38fffd2af56"]]},{"id":"e253897475d83426","type":"trigger","z":"17e2f5a99394454d","g":"680d0a8a35e74071","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1230,"y":1880,"wires":[["5e5c80b26daf5305"]]},{"id":"2008e8ea8f4faec0","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"hue lights","mode":"link","links":["995656e9572278bb","9804df596f4411a3"],"x":655,"y":260,"wires":[]},{"id":"0870145daf2688b4","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"patio light strip","mode":"link","links":["4c4db0ddc747906d"],"x":655,"y":140,"wires":[]},{"id":"fa5646d7eda90c53","type":"change","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"set flow","rules":[{"t":"set","p":"reference_light","pt":"flow","to":"reference_light","tot":"msg"},{"t":"set","p":"topic","pt":"flow","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":160,"wires":[["7619597807270288"]]},{"id":"7a449c6f2c3117c9","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"on/off lights","mode":"link","links":["654edaa7734a3671"],"x":655,"y":60,"wires":[]},{"id":"7a3c6bbf0ae21491","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"basic lights","mode":"link","links":["7eeb4ab08322bd37"],"x":655,"y":100,"wires":[]},{"id":"7619597807270288","type":"switch","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"input select","property":"topic","propertyType":"flow","rules":[{"t":"eq","v":"input_select.living_room_television_backlight","vt":"str"},{"t":"eq","v":"input_select.desk_lamp","vt":"str"},{"t":"eq","v":"input_select.network_closet_light","vt":"str"},{"t":"eq","v":"input_select.patio_light_strip","vt":"str"},{"t":"eq","v":"input_select.patio_spotlights","vt":"str"},{"t":"eq","v":"input_select.upper_chandelier","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":7,"x":470,"y":160,"wires":[["08baefb278bf68e3"],["7a449c6f2c3117c9"],["7a3c6bbf0ae21491"],["0870145daf2688b4"],["b843404c84b94e6e"],["ce74558e51c9ce2f"],["2008e8ea8f4faec0"]]},{"id":"b843404c84b94e6e","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"patio spotlights","mode":"link","links":["960d6046ed6342d8"],"x":655,"y":180,"wires":[]},{"id":"a1b820d9d7c6ddd6","type":"api-current-state","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":190,"y":1520,"wires":[["2096c8a622d54534"]]},{"id":"527779ddb4e3548c","type":"link out","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"off","mode":"link","links":["62d849f1a3c36380","0bbaf87fb3d567a9","0425dca1d74154e8","7f7bc1be243594dd","7a8103c0992d354f"],"x":1395,"y":1500,"wires":[]},{"id":"80b087b5e7d26eec","type":"change","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1500,"wires":[["98e0c58084c1c79a"]]},{"id":"8bb24a5b36852f77","type":"change","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"on","rules":[{"t":"set","p":"payload","pt":"msg","to":"On","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1540,"wires":[["4c5fe9f635c3ad1f"]]},{"id":"4c5fe9f635c3ad1f","type":"subflow:43f4a68c79d90c63","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","x":1240,"y":1540,"wires":[["804b9f1538a97c83"]]},{"id":"98e0c58084c1c79a","type":"subflow:281c25a193be97e3","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"","x":1240,"y":1500,"wires":[["527779ddb4e3548c"]]},{"id":"2096c8a622d54534","type":"api-current-state","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":1520,"wires":[["4f9e9ae679c3e989"],["dbf2805dc3d3f534"]]},{"id":"654edaa7734a3671","type":"link in","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"on/off lights","links":["7a449c6f2c3117c9","622e74c793c5d32e","0208c99fc1b544bf","de2c40fe70792df6","072bf031c58a17ed"],"x":75,"y":1520,"wires":[["a1b820d9d7c6ddd6"]]},{"id":"804b9f1538a97c83","type":"link out","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","name":"on","mode":"link","links":["2bc0ee5a9c69c049","f77a1dd5ae0f8c65","a8313ab0ad483b0f","0d101f203e29838e","e35254770f10e444"],"x":1395,"y":1540,"wires":[]},{"id":"995656e9572278bb","type":"link in","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"hue lights","links":["2008e8ea8f4faec0","c67fb0d9195aea69"],"x":75,"y":420,"wires":[["6fa0a639cbe5d624"]]},{"id":"aeb02b0d11c48095","type":"api-current-state","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":420,"wires":[["5c0a37d1c4b41d3b"],["518372e6f3cc47bf"]]},{"id":"2d07fdf90833a0ac","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"attributes","rules":[{"t":"set","p":"color_mode","pt":"flow","to":"data.attributes.color_mode","tot":"msg"},{"t":"set","p":"brightness","pt":"flow","to":"data.attributes.brightness","tot":"msg"},{"t":"set","p":"color_temp","pt":"flow","to":"data.attributes.color_temp","tot":"msg"},{"t":"set","p":"hue","pt":"flow","to":"data.attributes.hs_color[0]","tot":"msg"},{"t":"set","p":"saturation","pt":"flow","to":"data.attributes.hs_color[1]","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":480,"wires":[["2e8737da2f319efe"]]},{"id":"6fa0a639cbe5d624","type":"api-current-state","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":190,"y":420,"wires":[["c589569c63eeee3e"]]},{"id":"c589569c63eeee3e","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":370,"y":420,"wires":[["0bd7a163d3ada00a"],["0bd7a163d3ada00a"],["21de5845ac284bf8"],["21de5845ac284bf8"],["21de5845ac284bf8"],["26f2d2822c0bb11a"]]},{"id":"0bd7a163d3ada00a","type":"api-current-state","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":380,"wires":[["5c0a37d1c4b41d3b"],["518372e6f3cc47bf"]]},{"id":"8898252b8ed17447","type":"link out","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"defined","mode":"link","links":["2e1b23bb47331c72","48dff06a38d6766f"],"x":1395,"y":660,"wires":[]},{"id":"b7e1dceba1d4433b","type":"link out","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"off","mode":"link","links":["62d849f1a3c36380","7a8103c0992d354f"],"x":1395,"y":400,"wires":[]},{"id":"5c0a37d1c4b41d3b","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":400,"wires":[["df5246fafae3b764"]]},{"id":"26f2d2822c0bb11a","type":"api-current-state","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":460,"wires":[["5c0a37d1c4b41d3b"],["f2350bb6061eead7"]]},{"id":"3cb3f1f7f4eef017","type":"subflow:487d7fedac444ca9","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"","x":1250,"y":660,"wires":[["8898252b8ed17447"]]},{"id":"357a8853439c6cb4","type":"link out","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"passthrough","mode":"link","links":["4d402d0bce63789c","93d7e869bdaee9ba"],"x":1395,"y":440,"wires":[]},{"id":"df5246fafae3b764","type":"subflow:85c8354dbecae897","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":1240,"y":400,"wires":[["b7e1dceba1d4433b"]]},{"id":"308c86d98bc27a94","type":"subflow:a56c01d5e34949e6","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"","x":1220,"y":800,"wires":[["96647ef06bd0af57"]]},{"id":"96647ef06bd0af57","type":"link out","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"undefined","mode":"link","links":["1bd50a4de39ac702","0681ed49130c2646"],"x":1395,"y":800,"wires":[]},{"id":"ccb5a7206af7aafb","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"250","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":580,"wires":[["f05a9f3a494ba334"],["791b7b1288c8f16d"]]},{"id":"2e8737da2f319efe","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_mode","property":"color_mode","propertyType":"flow","rules":[{"t":"eq","v":"xy","vt":"str"},{"t":"eq","v":"color_temp","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":590,"y":520,"wires":[["791b7b1288c8f16d"],["35fb90d8f6fd03ab"],["791b7b1288c8f16d"]]},{"id":"f05a9f3a494ba334","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Maximum","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":580,"wires":[["c0162a7765139460"]]},{"id":"d3cf79f5b77b4b76","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Bright","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":620,"wires":[["c0162a7765139460"]]},{"id":"e3dc74aa9727e2d6","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":660,"wires":[["c0162a7765139460"]]},{"id":"47dedd8c127bd419","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":700,"wires":[["c0162a7765139460"]]},{"id":"a2d98bd063ab0d24","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":740,"wires":[["c0162a7765139460"]]},{"id":"bb5d84ea91bb30ac","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":780,"wires":[["c0162a7765139460"]]},{"id":"af0585e57da919a9","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":820,"wires":[["308c86d98bc27a94"]]},{"id":"35fb90d8f6fd03ab","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"brightness","property":"brightness","propertyType":"flow","rules":[{"t":"eq","v":"251","vt":"num"},{"t":"eq","v":"191","vt":"num"},{"t":"eq","v":"127","vt":"num"},{"t":"eq","v":"63","vt":"num"},{"t":"eq","v":"31","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":330,"y":680,"wires":[["ccb5a7206af7aafb"],["bf9f27c045f395e0"],["0a7b54c41cf9963e"],["2464b2760bae5e42"],["84fedc6f1ee09b0b"],["9a9feb0327bf80e0"],["5bfb58f5f733f4f1"]]},{"id":"bf9f27c045f395e0","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"300","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":620,"wires":[["d3cf79f5b77b4b76"],["791b7b1288c8f16d"]]},{"id":"9a9feb0327bf80e0","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"425","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":780,"wires":[["bb5d84ea91bb30ac"],["791b7b1288c8f16d"]]},{"id":"84fedc6f1ee09b0b","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"400","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":740,"wires":[["a2d98bd063ab0d24"],["791b7b1288c8f16d"]]},{"id":"2464b2760bae5e42","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"375","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":700,"wires":[["47dedd8c127bd419"],["791b7b1288c8f16d"]]},{"id":"0a7b54c41cf9963e","type":"switch","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"350","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":660,"wires":[["e3dc74aa9727e2d6"],["791b7b1288c8f16d"]]},{"id":"c7d772554e49326e","type":"trigger","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":440,"wires":[["357a8853439c6cb4"]]},{"id":"f2350bb6061eead7","type":"change","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":440,"wires":[["c7d772554e49326e"]]},{"id":"1df3a765c3bb6d4b","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"250","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2640,"wires":[["7413ca50eeed367d"],["0f0bb328e3c5f79e"]]},{"id":"741a6a6b15146649","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_mode","property":"color_mode","propertyType":"flow","rules":[{"t":"eq","v":"xy","vt":"str"},{"t":"eq","v":"color_temp","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":590,"y":2580,"wires":[["0f0bb328e3c5f79e"],["9301b302cf2d772e"],["0f0bb328e3c5f79e"]]},{"id":"7413ca50eeed367d","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Maximum","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":2640,"wires":[["c15ca288e6d90904"]]},{"id":"8b4be6777985df5c","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Bright","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":2680,"wires":[["c15ca288e6d90904"]]},{"id":"cb6a95900d533bbf","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":2720,"wires":[["c15ca288e6d90904"]]},{"id":"ceac744a415681cf","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":2760,"wires":[["c15ca288e6d90904"]]},{"id":"87f3aff1a63a20db","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":2800,"wires":[["c15ca288e6d90904"]]},{"id":"8587f07e7310c235","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":2840,"wires":[["c15ca288e6d90904"]]},{"id":"abe13180097419bc","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2880,"wires":[["b25a603e2c0c5865"]]},{"id":"9301b302cf2d772e","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"brightness","property":"brightness","propertyType":"flow","rules":[{"t":"eq","v":"251","vt":"num"},{"t":"eq","v":"191","vt":"num"},{"t":"eq","v":"127","vt":"num"},{"t":"eq","v":"63","vt":"num"},{"t":"eq","v":"31","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":330,"y":2740,"wires":[["1df3a765c3bb6d4b"],["41366178c2c3f8e6"],["2b53239ce5e570c3"],["05e5777047aa43da"],["45b81121f64dafbb"],["74c4ab7f66f0c5d6"],["c820832238f36fa4"]]},{"id":"41366178c2c3f8e6","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"300","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2680,"wires":[["8b4be6777985df5c"],["0f0bb328e3c5f79e"]]},{"id":"74c4ab7f66f0c5d6","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"425","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2840,"wires":[["8587f07e7310c235"],["0f0bb328e3c5f79e"]]},{"id":"45b81121f64dafbb","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"400","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2800,"wires":[["87f3aff1a63a20db"],["0f0bb328e3c5f79e"]]},{"id":"05e5777047aa43da","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"375","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2760,"wires":[["ceac744a415681cf"],["0f0bb328e3c5f79e"]]},{"id":"2b53239ce5e570c3","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"350","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":2720,"wires":[["cb6a95900d533bbf"],["0f0bb328e3c5f79e"]]},{"id":"a5bfafeea3f24f22","type":"api-current-state","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":2480,"wires":[["384f4ba9a880c8f8"],["7b35c3375a321deb"]]},{"id":"95a30d78979ca6aa","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"attributes","rules":[{"t":"set","p":"color_mode","pt":"flow","to":"data.attributes.color_mode","tot":"msg"},{"t":"set","p":"brightness","pt":"flow","to":"data.attributes.brightness","tot":"msg"},{"t":"set","p":"color_temp","pt":"flow","to":"data.attributes.color_temp","tot":"msg"},{"t":"set","p":"hue","pt":"flow","to":"data.attributes.hs_color[0]","tot":"msg"},{"t":"set","p":"saturation","pt":"flow","to":"data.attributes.hs_color[1]","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":2540,"wires":[["741a6a6b15146649"]]},{"id":"384f4ba9a880c8f8","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"Turn Off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Turn Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":2460,"wires":[["c15ca288e6d90904"]]},{"id":"f48d4745e9a4253c","type":"api-current-state","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":210,"y":2480,"wires":[["6d8b67dde526db3f"]]},{"id":"6d8b67dde526db3f","type":"switch","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":370,"y":2480,"wires":[["7e08b3a8b157ac43"],["7e08b3a8b157ac43"],["eb85d8368d0e31c7"],["eb85d8368d0e31c7"],["eb85d8368d0e31c7"],["cf4e5a6393fd4e55"]]},{"id":"7e08b3a8b157ac43","type":"api-current-state","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":2440,"wires":[["65bb899eaa7cf315"],["7b35c3375a321deb"]]},{"id":"2b867d168ef4c202","type":"link out","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"defined","mode":"link","links":["2e1b23bb47331c72","71a06f28fe3d11e7","a8941517e8d41437","c352b4a97eb6e42b","48dff06a38d6766f"],"x":1395,"y":2720,"wires":[]},{"id":"2e72d2b93e588e58","type":"link out","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"off","mode":"link","links":["62d849f1a3c36380","0bbaf87fb3d567a9","0425dca1d74154e8","7f7bc1be243594dd","7a8103c0992d354f"],"x":1395,"y":2420,"wires":[]},{"id":"65bb899eaa7cf315","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":2420,"wires":[["9264befd36d0949f"]]},{"id":"5ead7f9874198838","type":"change","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":2500,"wires":[["d6d458ebdd1d6cf9"]]},{"id":"cf4e5a6393fd4e55","type":"api-current-state","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":2520,"wires":[["384f4ba9a880c8f8"],["5ead7f9874198838"]]},{"id":"932b0d8a6b19f814","type":"link out","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"passthrough","mode":"link","links":["4d402d0bce63789c","0a13c54eab6b6c02","bb3df17cf86c7fab","b3527980f02c767f","93d7e869bdaee9ba"],"x":1395,"y":2500,"wires":[]},{"id":"3164fd663afd616b","type":"link out","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"undefined","mode":"link","links":["1bd50a4de39ac702","0128d9fa49fce859","63d7d2639514a47e","6511fdcc12b30056","0681ed49130c2646"],"x":1395,"y":2880,"wires":[]},{"id":"960d6046ed6342d8","type":"link in","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"patio spotlights","links":["b843404c84b94e6e","396764a2353de956","0e6a176122fcbf2f","8442342fd5b505b9"],"x":75,"y":2480,"wires":[["f48d4745e9a4253c"]]},{"id":"9264befd36d0949f","type":"subflow:2c41a6d36fab0f47","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"","x":1240,"y":2420,"wires":[["2e72d2b93e588e58"]]},{"id":"c134357f35e4b0cc","type":"subflow:c6511c9f3ac2c88f","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"","x":1250,"y":2720,"wires":[["2b867d168ef4c202"]]},{"id":"b25a603e2c0c5865","type":"subflow:fd2ff9f3f5b11066","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":1210,"y":2880,"wires":[["3164fd663afd616b"]]},{"id":"d6d458ebdd1d6cf9","type":"trigger","z":"17e2f5a99394454d","g":"241defe8ccf02715","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":2500,"wires":[["932b0d8a6b19f814"]]},{"id":"b29bfca4b6bcf1bb","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"250","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1120,"wires":[["d864c2fef8547f4e"],["9f9a2e447a72928e"]]},{"id":"7b1b8ccd946de065","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_mode","property":"color_mode","propertyType":"flow","rules":[{"t":"eq","v":"xy","vt":"str"},{"t":"eq","v":"color_temp","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":570,"y":1060,"wires":[["9f9a2e447a72928e"],["036ab685a634f8ee"],["9f9a2e447a72928e"]]},{"id":"d864c2fef8547f4e","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Maximum","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":1120,"wires":[["232f83403da46f66"]]},{"id":"93b11f409843bfed","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Bright","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1160,"wires":[["232f83403da46f66"]]},{"id":"cfc625c8c4055f4b","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":1200,"wires":[["232f83403da46f66"]]},{"id":"ac66c57af66b4e87","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1240,"wires":[["232f83403da46f66"]]},{"id":"0cb3db550ea70eb5","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1280,"wires":[["232f83403da46f66"]]},{"id":"dca3cc94298df7f5","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1320,"wires":[["232f83403da46f66"]]},{"id":"ff93ebafbd1dbeaf","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1360,"wires":[["5fc67bde9fc580f4"]]},{"id":"036ab685a634f8ee","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"brightness","property":"brightness","propertyType":"flow","rules":[{"t":"eq","v":"251","vt":"num"},{"t":"eq","v":"191","vt":"num"},{"t":"eq","v":"127","vt":"num"},{"t":"eq","v":"63","vt":"num"},{"t":"eq","v":"31","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":310,"y":1220,"wires":[["b29bfca4b6bcf1bb"],["a264e1880a6750af"],["0bd3c8a11f614f40"],["0883c8414fcbf367"],["8f1c55e5f3f27efa"],["07b5d34b230cb947"],["ac2704badee6c7bf"]]},{"id":"a264e1880a6750af","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"300","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1160,"wires":[["93b11f409843bfed"],["9f9a2e447a72928e"]]},{"id":"07b5d34b230cb947","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"425","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1320,"wires":[["dca3cc94298df7f5"],["9f9a2e447a72928e"]]},{"id":"8f1c55e5f3f27efa","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"400","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1280,"wires":[["0cb3db550ea70eb5"],["9f9a2e447a72928e"]]},{"id":"0883c8414fcbf367","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"375","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1240,"wires":[["ac66c57af66b4e87"],["9f9a2e447a72928e"]]},{"id":"0bd3c8a11f614f40","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"350","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1200,"wires":[["cfc625c8c4055f4b"],["9f9a2e447a72928e"]]},{"id":"5f7a7b4eb8c860e6","type":"api-current-state","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":960,"wires":[["3d73e83180e9956e"],["6b828965ec368759"]]},{"id":"0fd00f9c1cb799eb","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"attributes","rules":[{"t":"set","p":"color_mode","pt":"flow","to":"data.attributes.color_mode","tot":"msg"},{"t":"set","p":"brightness","pt":"flow","to":"data.attributes.brightness","tot":"msg"},{"t":"set","p":"color_temp","pt":"flow","to":"data.attributes.color_temp","tot":"msg"},{"t":"set","p":"hue","pt":"flow","to":"data.attributes.hs_color[0]","tot":"msg"},{"t":"set","p":"saturation","pt":"flow","to":"data.attributes.hs_color[1]","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":1020,"wires":[["7b1b8ccd946de065"]]},{"id":"fafba92817f8eb7f","type":"api-current-state","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":190,"y":960,"wires":[["b9a58acea85d05d8"]]},{"id":"b9a58acea85d05d8","type":"switch","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":350,"y":960,"wires":[["7536eda2530fa6e0"],["7536eda2530fa6e0"],["bd78b5b3bfcf9811"],["bd78b5b3bfcf9811"],["bd78b5b3bfcf9811"],["6c3984130afa2e67"]]},{"id":"7536eda2530fa6e0","type":"api-current-state","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":920,"wires":[["3d73e83180e9956e"],["6b828965ec368759"]]},{"id":"afa21728da7de330","type":"link out","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"defined","mode":"link","links":["2e1b23bb47331c72","71a06f28fe3d11e7","a8941517e8d41437","c352b4a97eb6e42b","48dff06a38d6766f"],"x":1395,"y":1200,"wires":[]},{"id":"dc3f61c8e9e64f82","type":"link out","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"off","mode":"link","links":["62d849f1a3c36380","0bbaf87fb3d567a9","0425dca1d74154e8","7f7bc1be243594dd","7a8103c0992d354f"],"x":1395,"y":900,"wires":[]},{"id":"3d73e83180e9956e","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":900,"wires":[["8ec4d18031baf2f2"]]},{"id":"babc43f4ef13d209","type":"change","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":980,"wires":[["d5b48ba74d970d79"]]},{"id":"6c3984130afa2e67","type":"api-current-state","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":1000,"wires":[["3d73e83180e9956e"],["babc43f4ef13d209"]]},{"id":"adf9d975de329806","type":"link out","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"passthrough","mode":"link","links":["4d402d0bce63789c","0a13c54eab6b6c02","bb3df17cf86c7fab","b3527980f02c767f","93d7e869bdaee9ba"],"x":1395,"y":980,"wires":[]},{"id":"7eeb4ab08322bd37","type":"link in","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"basic lights","links":["7a3c6bbf0ae21491","20309974729467d2","8307b3c9b191e4f5","dfd5db155059ea61","273e35c5de17a662"],"x":75,"y":960,"wires":[["fafba92817f8eb7f"]]},{"id":"8ec4d18031baf2f2","type":"subflow:0e93a473e88af3fd","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":1240,"y":900,"wires":[["dc3f61c8e9e64f82"]]},{"id":"e3db96e684c4bca4","type":"subflow:d03aaf41d665b3ae","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"","x":1250,"y":1200,"wires":[["afa21728da7de330"]]},{"id":"5fc67bde9fc580f4","type":"subflow:4a371c0a50a6b75f","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":1210,"y":1360,"wires":[["aa49ba51efc7fc98"]]},{"id":"aa49ba51efc7fc98","type":"link out","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"undefined","mode":"link","links":["1bd50a4de39ac702","0128d9fa49fce859","63d7d2639514a47e","6511fdcc12b30056","0681ed49130c2646"],"x":1395,"y":1360,"wires":[]},{"id":"d5b48ba74d970d79","type":"trigger","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":980,"wires":[["adf9d975de329806"]]},{"id":"bdb1403585e80286","type":"change","z":"17e2f5a99394454d","g":"ba410907b22eec81","name":"defined","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"},{"t":"set","p":"light_scene","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":2360,"y":540,"wires":[["ba179df3cc842380"]]},{"id":"3c042f4804825afe","type":"api-call-service","z":"17e2f5a99394454d","g":"ba410907b22eec81","name":"input select option","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"{{flow.light_scene}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2190,"y":540,"wires":[["bdb1403585e80286"]]},{"id":"2ed43c73ecfd3f7e","type":"api-call-service","z":"17e2f5a99394454d","g":"ba410907b22eec81","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1970,"y":540,"wires":[["3c042f4804825afe"]]},{"id":"2e1b23bb47331c72","type":"link in","z":"17e2f5a99394454d","g":"ba410907b22eec81","name":"defined","links":["8898252b8ed17447","9859a4fb96e0f078","afa21728da7de330","ef86ef02a5b62ab6","2b867d168ef4c202","2b00e2ec04dbe8c9"],"x":1595,"y":540,"wires":[["2ed43c73ecfd3f7e"]]},{"id":"4d402d0bce63789c","type":"link in","z":"17e2f5a99394454d","g":"30abf9bb974a6f14","name":"passthrough","links":["357a8853439c6cb4","64771ef2dfb20a9e","adf9d975de329806","5e5c80b26daf5305","932b0d8a6b19f814","d805770e59a0ef8c"],"x":1595,"y":140,"wires":[["6cb514b5fe488a47"]]},{"id":"6cb514b5fe488a47","type":"change","z":"17e2f5a99394454d","g":"30abf9bb974a6f14","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"},{"t":"set","p":"light_scene","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":2350,"y":140,"wires":[["ba179df3cc842380"]]},{"id":"1bd50a4de39ac702","type":"link in","z":"17e2f5a99394454d","g":"efd6b71af0624584","name":"undefined","links":["96647ef06bd0af57","988d4ce71d1a3185","aa49ba51efc7fc98","3164fd663afd616b","e365beb84cfc6d34"],"x":1595,"y":440,"wires":[["6c8ee7388611ac3a"]]},{"id":"eca83c938c34b4e1","type":"change","z":"17e2f5a99394454d","g":"efd6b71af0624584","name":"undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2360,"y":440,"wires":[["ba179df3cc842380"]]},{"id":"2d41383dafc668b9","type":"api-call-service","z":"17e2f5a99394454d","g":"efd6b71af0624584","name":"input select undefined","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"Undefined\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2180,"y":440,"wires":[["eca83c938c34b4e1"]]},{"id":"6c8ee7388611ac3a","type":"api-call-service","z":"17e2f5a99394454d","g":"efd6b71af0624584","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1950,"y":440,"wires":[["2d41383dafc668b9"]]},{"id":"dba126f34c3c6edc","type":"change","z":"17e2f5a99394454d","g":"4162bff5a835a013","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2370,"y":240,"wires":[["ba179df3cc842380"]]},{"id":"62d849f1a3c36380","type":"link in","z":"17e2f5a99394454d","g":"4162bff5a835a013","name":"off","links":["b7e1dceba1d4433b","527779ddb4e3548c","aab1e4b5726419f8","dc3f61c8e9e64f82","2e72d2b93e588e58","a1ea988933575444"],"x":1595,"y":240,"wires":[["b36055b2e3530751"]]},{"id":"2b77f8378502332b","type":"api-call-service","z":"17e2f5a99394454d","g":"4162bff5a835a013","name":"input select off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2220,"y":240,"wires":[["dba126f34c3c6edc"]]},{"id":"b36055b2e3530751","type":"api-call-service","z":"17e2f5a99394454d","g":"4162bff5a835a013","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":2010,"y":240,"wires":[["2b77f8378502332b"]]},{"id":"5fe0425281d72562","type":"change","z":"17e2f5a99394454d","g":"54d0ffc970008060","name":"on","rules":[{"t":"set","p":"payload","pt":"msg","to":"On","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2370,"y":340,"wires":[["ba179df3cc842380"]]},{"id":"b8a0d577bdff2730","type":"api-call-service","z":"17e2f5a99394454d","g":"54d0ffc970008060","name":"input select on","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"On\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2220,"y":340,"wires":[["5fe0425281d72562"]]},{"id":"d6a01c8883e0e176","type":"api-call-service","z":"17e2f5a99394454d","g":"54d0ffc970008060","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":2010,"y":340,"wires":[["b8a0d577bdff2730"]]},{"id":"2bc0ee5a9c69c049","type":"link in","z":"17e2f5a99394454d","g":"54d0ffc970008060","name":"on","links":["804b9f1538a97c83"],"x":1595,"y":340,"wires":[["d6a01c8883e0e176"]]},{"id":"adc0214bfa759bd4","type":"api-current-state","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":3020,"wires":[["efbc895ae4f980ed"],["37edf4b622b3b190"]]},{"id":"e02bb8ae5a5a7af4","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"attributes","rules":[{"t":"set","p":"color_mode","pt":"flow","to":"data.attributes.color_mode","tot":"msg"},{"t":"set","p":"brightness","pt":"flow","to":"data.attributes.brightness","tot":"msg"},{"t":"set","p":"color_temp","pt":"flow","to":"data.attributes.color_temp","tot":"msg"},{"t":"set","p":"hue","pt":"flow","to":"data.attributes.hs_color[0]","tot":"msg"},{"t":"set","p":"saturation","pt":"flow","to":"data.attributes.hs_color[1]","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":3080,"wires":[["0737a86687e549f5"]]},{"id":"b87593f833c5abb8","type":"api-current-state","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"input select","server":"e14e0276.68398","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{topic}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"light_scene","propertyType":"flow","value":"","valueType":"entityState"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":210,"y":3020,"wires":[["8e9b2a9c2da67c7f"]]},{"id":"8e9b2a9c2da67c7f","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":370,"y":3020,"wires":[["19e780a6433efcb0"],["19e780a6433efcb0"],["67edf785d0cba9f8"],["67edf785d0cba9f8"],["67edf785d0cba9f8"],["438645a20a70c0f0"]]},{"id":"19e780a6433efcb0","type":"api-current-state","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":2980,"wires":[["efbc895ae4f980ed"],["37edf4b622b3b190"]]},{"id":"2b00e2ec04dbe8c9","type":"link out","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"defined","mode":"link","links":["2e1b23bb47331c72","a8941517e8d41437","c352b4a97eb6e42b","48dff06a38d6766f"],"x":1395,"y":3260,"wires":[]},{"id":"a1ea988933575444","type":"link out","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"off","mode":"link","links":["62d849f1a3c36380","0425dca1d74154e8","7f7bc1be243594dd","7a8103c0992d354f"],"x":1395,"y":3000,"wires":[]},{"id":"efbc895ae4f980ed","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":3000,"wires":[["7f185c4c02d3ea86"]]},{"id":"438645a20a70c0f0","type":"api-current-state","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"reference light off","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"{{flow.reference_light}}","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":3060,"wires":[["efbc895ae4f980ed"],["b938128cb3c9329e"]]},{"id":"f24185bd32a79e3d","type":"subflow:487d7fedac444ca9","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"","x":1250,"y":3260,"wires":[["2b00e2ec04dbe8c9"]]},{"id":"d805770e59a0ef8c","type":"link out","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"passthrough","mode":"link","links":["4d402d0bce63789c","bb3df17cf86c7fab","b3527980f02c767f","93d7e869bdaee9ba"],"x":1395,"y":3040,"wires":[]},{"id":"7f185c4c02d3ea86","type":"subflow:85c8354dbecae897","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"","x":1240,"y":3000,"wires":[["a1ea988933575444"]]},{"id":"8238103af3a7f8e7","type":"subflow:a56c01d5e34949e6","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"","x":1220,"y":3400,"wires":[["e365beb84cfc6d34"]]},{"id":"e365beb84cfc6d34","type":"link out","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"undefined","mode":"link","links":["1bd50a4de39ac702","63d7d2639514a47e","6511fdcc12b30056","0681ed49130c2646"],"x":1395,"y":3400,"wires":[]},{"id":"1ab900ccd020738e","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"250","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3180,"wires":[["172954e400b1b1ac"],["68456b434ff5afea"]]},{"id":"0737a86687e549f5","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_mode","property":"color_mode","propertyType":"flow","rules":[{"t":"eq","v":"xy","vt":"str"},{"t":"eq","v":"color_temp","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":590,"y":3120,"wires":[["68456b434ff5afea"],["769f6fdd4aab5f61"],["68456b434ff5afea"]]},{"id":"172954e400b1b1ac","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Maximum","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":3180,"wires":[["a242c21ade5c2136"]]},{"id":"e76a4a8dfd38f9ae","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Bright","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3220,"wires":[["a242c21ade5c2136"]]},{"id":"6fe777b8c464dfda","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Normal","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":3260,"wires":[["a242c21ade5c2136"]]},{"id":"515e2f7c71f5094a","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Soft","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3300,"wires":[["a242c21ade5c2136"]]},{"id":"c103b646b683f71e","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3340,"wires":[["a242c21ade5c2136"]]},{"id":"18d558dd1cd71f4a","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Night","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3380,"wires":[["a242c21ade5c2136"]]},{"id":"5b082ae855ef3274","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":3420,"wires":[["8238103af3a7f8e7"]]},{"id":"769f6fdd4aab5f61","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"brightness","property":"brightness","propertyType":"flow","rules":[{"t":"eq","v":"251","vt":"num"},{"t":"eq","v":"191","vt":"num"},{"t":"eq","v":"127","vt":"num"},{"t":"eq","v":"63","vt":"num"},{"t":"eq","v":"31","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":330,"y":3280,"wires":[["1ab900ccd020738e"],["0a9603cc9960bd40"],["803c69b8adc3397c"],["1323f6f51c48eb62"],["a43ed3f1fde78f1f"],["7df49c2e879649ed"],["95870da6e66c7d9c"]]},{"id":"0a9603cc9960bd40","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"300","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3220,"wires":[["e76a4a8dfd38f9ae"],["68456b434ff5afea"]]},{"id":"7df49c2e879649ed","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"425","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3380,"wires":[["18d558dd1cd71f4a"],["68456b434ff5afea"]]},{"id":"a43ed3f1fde78f1f","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"400","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3340,"wires":[["c103b646b683f71e"],["68456b434ff5afea"]]},{"id":"1323f6f51c48eb62","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"375","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3300,"wires":[["515e2f7c71f5094a"],["68456b434ff5afea"]]},{"id":"803c69b8adc3397c","type":"switch","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"color_temp","property":"color_temp","propertyType":"flow","rules":[{"t":"eq","v":"350","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":3260,"wires":[["6fe777b8c464dfda"],["68456b434ff5afea"]]},{"id":"904c3e4b210f2473","type":"trigger","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":3040,"wires":[["d805770e59a0ef8c"]]},{"id":"b938128cb3c9329e","type":"change","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"passthrough","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":3040,"wires":[["904c3e4b210f2473"]]},{"id":"ce74558e51c9ce2f","type":"link out","z":"17e2f5a99394454d","g":"48049020a15c5ac6","name":"smartlife lights","mode":"link","links":["654a3cc1b749e665"],"x":655,"y":220,"wires":[]},{"id":"654a3cc1b749e665","type":"link in","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","name":"link in 434","links":["ce74558e51c9ce2f","a06438518d64a7c2","93f9a3c8c3cf3023","db1b3d78e781d1fa"],"x":75,"y":3020,"wires":[["b87593f833c5abb8"]]},{"id":"08baefb278bf68e3","type":"trigger","z":"17e2f5a99394454d","name":"TEMP BYPASS","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":640,"y":320,"wires":[["5c0a37d1c4b41d3b"]]},{"id":"43d759feb7c9c27d","type":"junction","z":"17e2f5a99394454d","x":2600,"y":340,"wires":[[]]},{"id":"928f14bf5133cafc","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":1080,"y":2060,"wires":[["91260ec244813c7e"]]},{"id":"afc5e891f8142fcf","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":640,"y":2320,"wires":[["4dbe82ba084c0668"]]},{"id":"7887e7b224241ffd","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":440,"y":1720,"wires":[["e1bfdba7dcc7dedb"]]},{"id":"367040a5b9e99f35","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":1080,"y":2240,"wires":[["e0492f3dc1c4f51a"]]},{"id":"d6509b3fec26a45f","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":440,"y":1760,"wires":[["a114f7e48914b536"]]},{"id":"ff20f79192cbc174","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":820,"y":1780,"wires":[["2fc0b80b1b2182b0"]]},{"id":"365c05c2416aa53b","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":820,"y":1740,"wires":[["72be35f87f1311d0"]]},{"id":"6f2b0dad351366ce","type":"junction","z":"17e2f5a99394454d","g":"680d0a8a35e74071","x":860,"y":1880,"wires":[["ecbedb05a2a9469a"]]},{"id":"4f9e9ae679c3e989","type":"junction","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","x":780,"y":1500,"wires":[["80b087b5e7d26eec"]]},{"id":"dbf2805dc3d3f534","type":"junction","z":"17e2f5a99394454d","g":"0a1351cbeaae2fa3","x":780,"y":1540,"wires":[["8bb24a5b36852f77"]]},{"id":"ba179df3cc842380","type":"junction","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","x":2540,"y":340,"wires":[["43d759feb7c9c27d"]]},{"id":"21de5845ac284bf8","type":"junction","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":460,"y":420,"wires":[["aeb02b0d11c48095"]]},{"id":"518372e6f3cc47bf","type":"junction","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":740,"y":480,"wires":[["2d07fdf90833a0ac"]]},{"id":"c0162a7765139460","type":"junction","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":1080,"y":660,"wires":[["3cb3f1f7f4eef017"]]},{"id":"791b7b1288c8f16d","type":"junction","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":780,"y":820,"wires":[["af0585e57da919a9"]]},{"id":"5bfb58f5f733f4f1","type":"junction","z":"17e2f5a99394454d","g":"7cdab516ff5192fd","x":520,"y":820,"wires":[["791b7b1288c8f16d"]]},{"id":"c15ca288e6d90904","type":"junction","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":1080,"y":2720,"wires":[["c134357f35e4b0cc"]]},{"id":"0f0bb328e3c5f79e","type":"junction","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":780,"y":2880,"wires":[["abe13180097419bc"]]},{"id":"c820832238f36fa4","type":"junction","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":520,"y":2880,"wires":[["0f0bb328e3c5f79e"]]},{"id":"eb85d8368d0e31c7","type":"junction","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":460,"y":2480,"wires":[["a5bfafeea3f24f22"]]},{"id":"7b35c3375a321deb","type":"junction","z":"17e2f5a99394454d","g":"241defe8ccf02715","x":740,"y":2540,"wires":[["95a30d78979ca6aa"]]},{"id":"9f9a2e447a72928e","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":760,"y":1360,"wires":[["ff93ebafbd1dbeaf"]]},{"id":"ac2704badee6c7bf","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":500,"y":1360,"wires":[["9f9a2e447a72928e"]]},{"id":"232f83403da46f66","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":1060,"y":1200,"wires":[["e3db96e684c4bca4"]]},{"id":"bd78b5b3bfcf9811","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":440,"y":960,"wires":[["5f7a7b4eb8c860e6"]]},{"id":"a77888ce05967e2b","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":890,"y":960,"wires":[[]]},{"id":"6b828965ec368759","type":"junction","z":"17e2f5a99394454d","g":"8d133371f5ef7ee2","x":760,"y":1020,"wires":[["0fd00f9c1cb799eb"]]},{"id":"ea9290af5c1e254e","type":"junction","z":"17e2f5a99394454d","x":100,"y":160,"wires":[["fa5646d7eda90c53"]]},{"id":"67edf785d0cba9f8","type":"junction","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","x":460,"y":3020,"wires":[["adc0214bfa759bd4"]]},{"id":"37edf4b622b3b190","type":"junction","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","x":740,"y":3080,"wires":[["e02bb8ae5a5a7af4"]]},{"id":"a242c21ade5c2136","type":"junction","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","x":1080,"y":3260,"wires":[["f24185bd32a79e3d"]]},{"id":"68456b434ff5afea","type":"junction","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","x":780,"y":3420,"wires":[["5b082ae855ef3274"]]},{"id":"95870da6e66c7d9c","type":"junction","z":"17e2f5a99394454d","g":"16ac9fb7e2c414b9","x":520,"y":3420,"wires":[["68456b434ff5afea"]]},{"id":"680d0a8a35e74071","type":"group","z":"17e2f5a99394454d","name":"patio light strip","style":{"label":true},"nodes":["44342b218bca59f5","4c4db0ddc747906d","44dcbbc59c954939","928f14bf5133cafc","59e88871f1d029bb","881419645159197f","5637cbad192d03e1","f49506dedca3c9d0","3ae9928cd412727c","32f2b6f68b3f45c6","4dbe82ba084c0668","105a773e5eb27552","ba5da38fffd2af56","bfd5707fa57f002b","afc5e891f8142fcf","988d4ce71d1a3185","61e19677a86a8ab6","91260ec244813c7e","5d195463b0f1fef3","e0492f3dc1c4f51a","aab1e4b5726419f8","ecfc124d41d9a060","418e4064a6ccb167","84d40407d1bf1882","7887e7b224241ffd","e1bfdba7dcc7dedb","3123f70ccdf89670","367040a5b9e99f35","a114f7e48914b536","d6509b3fec26a45f","103aefcd4fccf7fd","ef86ef02a5b62ab6","ff20f79192cbc174","365c05c2416aa53b","46fc97e0b8c515fc","03d959a036c31ff4","ef3f4f17aeb426f6","6f2b0dad351366ce","5e5c80b26daf5305","ecbedb05a2a9469a","ef5fa0677ff2cd8c","2fc0b80b1b2182b0","72be35f87f1311d0","51dec9783ad769f4","127e421257516cff","018d58693dc547f4","1d64da2a0764f922","e253897475d83426"],"x":34,"y":1639,"w":1382,"h":722},{"id":"48049020a15c5ac6","type":"group","z":"17e2f5a99394454d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["2008e8ea8f4faec0","0870145daf2688b4","fa5646d7eda90c53","7a449c6f2c3117c9","7a3c6bbf0ae21491","7619597807270288","b843404c84b94e6e","ce74558e51c9ce2f"],"x":134,"y":19,"w":562,"h":282},{"id":"0a1351cbeaae2fa3","type":"group","z":"17e2f5a99394454d","name":"on/off lights","style":{"label":true},"nodes":["a1b820d9d7c6ddd6","527779ddb4e3548c","80b087b5e7d26eec","8bb24a5b36852f77","4c5fe9f635c3ad1f","98e0c58084c1c79a","2096c8a622d54534","654edaa7734a3671","4f9e9ae679c3e989","dbf2805dc3d3f534","804b9f1538a97c83"],"x":34,"y":1459,"w":1402,"h":122},{"id":"e10e5fbdca48ca13","type":"group","z":"17e2f5a99394454d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ba410907b22eec81","30abf9bb974a6f14","efd6b71af0624584","4162bff5a835a013","54d0ffc970008060","ba179df3cc842380"],"x":1528,"y":73,"w":1038,"h":534},{"id":"7cdab516ff5192fd","type":"group","z":"17e2f5a99394454d","name":"standard hue lights","style":{"label":true},"nodes":["995656e9572278bb","aeb02b0d11c48095","2d07fdf90833a0ac","6fa0a639cbe5d624","c589569c63eeee3e","0bd7a163d3ada00a","21de5845ac284bf8","8898252b8ed17447","b7e1dceba1d4433b","5c0a37d1c4b41d3b","518372e6f3cc47bf","26f2d2822c0bb11a","3cb3f1f7f4eef017","357a8853439c6cb4","df5246fafae3b764","308c86d98bc27a94","96647ef06bd0af57","ccb5a7206af7aafb","2e8737da2f319efe","f05a9f3a494ba334","d3cf79f5b77b4b76","e3dc74aa9727e2d6","47dedd8c127bd419","a2d98bd063ab0d24","bb5d84ea91bb30ac","af0585e57da919a9","35fb90d8f6fd03ab","bf9f27c045f395e0","9a9feb0327bf80e0","84fedc6f1ee09b0b","2464b2760bae5e42","0a7b54c41cf9963e","c0162a7765139460","791b7b1288c8f16d","5bfb58f5f733f4f1","c7d772554e49326e","f2350bb6061eead7"],"x":34,"y":339,"w":1402,"h":522},{"id":"241defe8ccf02715","type":"group","z":"17e2f5a99394454d","name":"patio spotlights","style":{"label":true},"nodes":["1df3a765c3bb6d4b","741a6a6b15146649","7413ca50eeed367d","8b4be6777985df5c","cb6a95900d533bbf","ceac744a415681cf","87f3aff1a63a20db","8587f07e7310c235","abe13180097419bc","9301b302cf2d772e","41366178c2c3f8e6","74c4ab7f66f0c5d6","45b81121f64dafbb","05e5777047aa43da","2b53239ce5e570c3","c15ca288e6d90904","0f0bb328e3c5f79e","c820832238f36fa4","a5bfafeea3f24f22","95a30d78979ca6aa","384f4ba9a880c8f8","f48d4745e9a4253c","6d8b67dde526db3f","7e08b3a8b157ac43","eb85d8368d0e31c7","2b867d168ef4c202","2e72d2b93e588e58","65bb899eaa7cf315","5ead7f9874198838","7b35c3375a321deb","cf4e5a6393fd4e55","932b0d8a6b19f814","3164fd663afd616b","960d6046ed6342d8","9264befd36d0949f","c134357f35e4b0cc","b25a603e2c0c5865","d6d458ebdd1d6cf9"],"x":34,"y":2379,"w":1402,"h":542},{"id":"8d133371f5ef7ee2","type":"group","z":"17e2f5a99394454d","name":"basic lights","style":{"label":true},"nodes":["b29bfca4b6bcf1bb","7b1b8ccd946de065","d864c2fef8547f4e","93b11f409843bfed","cfc625c8c4055f4b","ac66c57af66b4e87","0cb3db550ea70eb5","dca3cc94298df7f5","ff93ebafbd1dbeaf","036ab685a634f8ee","a264e1880a6750af","07b5d34b230cb947","8f1c55e5f3f27efa","0883c8414fcbf367","0bd3c8a11f614f40","9f9a2e447a72928e","ac2704badee6c7bf","232f83403da46f66","5f7a7b4eb8c860e6","0fd00f9c1cb799eb","fafba92817f8eb7f","b9a58acea85d05d8","7536eda2530fa6e0","bd78b5b3bfcf9811","afa21728da7de330","a77888ce05967e2b","dc3f61c8e9e64f82","3d73e83180e9956e","babc43f4ef13d209","6b828965ec368759","6c3984130afa2e67","adf9d975de329806","7eeb4ab08322bd37","8ec4d18031baf2f2","e3db96e684c4bca4","5fc67bde9fc580f4","aa49ba51efc7fc98","d5b48ba74d970d79"],"x":34,"y":859,"w":1402,"h":542},{"id":"16ac9fb7e2c414b9","type":"group","z":"17e2f5a99394454d","name":"smartlife lights","style":{"label":true},"nodes":["adc0214bfa759bd4","e02bb8ae5a5a7af4","b87593f833c5abb8","8e9b2a9c2da67c7f","19e780a6433efcb0","67edf785d0cba9f8","2b00e2ec04dbe8c9","a1ea988933575444","efbc895ae4f980ed","37edf4b622b3b190","438645a20a70c0f0","f24185bd32a79e3d","d805770e59a0ef8c","7f185c4c02d3ea86","8238103af3a7f8e7","e365beb84cfc6d34","1ab900ccd020738e","0737a86687e549f5","172954e400b1b1ac","e76a4a8dfd38f9ae","6fe777b8c464dfda","515e2f7c71f5094a","c103b646b683f71e","18d558dd1cd71f4a","5b082ae855ef3274","769f6fdd4aab5f61","0a9603cc9960bd40","7df49c2e879649ed","a43ed3f1fde78f1f","1323f6f51c48eb62","803c69b8adc3397c","a242c21ade5c2136","68456b434ff5afea","95870da6e66c7d9c","904c3e4b210f2473","b938128cb3c9329e","654a3cc1b749e665"],"x":34,"y":2939,"w":1402,"h":522},{"id":"ba410907b22eec81","type":"group","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","name":"input select defined","style":{"label":true},"nodes":["bdb1403585e80286","3c042f4804825afe","2ed43c73ecfd3f7e","2e1b23bb47331c72"],"x":1554,"y":499,"w":892,"h":82},{"id":"30abf9bb974a6f14","type":"group","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["4d402d0bce63789c","6cb514b5fe488a47"],"x":1554,"y":99,"w":892,"h":82},{"id":"efd6b71af0624584","type":"group","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1bd50a4de39ac702","eca83c938c34b4e1","2d41383dafc668b9","6c8ee7388611ac3a"],"x":1554,"y":399,"w":892,"h":82},{"id":"4162bff5a835a013","type":"group","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["dba126f34c3c6edc","62d849f1a3c36380","2b77f8378502332b","b36055b2e3530751"],"x":1554,"y":199,"w":892,"h":82},{"id":"54d0ffc970008060","type":"group","z":"17e2f5a99394454d","g":"e10e5fbdca48ca13","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5fe0425281d72562","b8a0d577bdff2730","d6a01c8883e0e176","2bc0ee5a9c69c049"],"x":1554,"y":299,"w":892,"h":82},{"id":"4d31c3c8d67a48c0","type":"subflow","name":"light update","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"e542fed9b83dea74"}]}],"out":[],"env":[],"meta":{},"color":"#DDAA99","status":{"x":1360,"y":80,"wires":[{"id":"1eb862fd9135df3c","port":0}]}},{"id":"e542fed9b83dea74","type":"api-call-service","z":"4d31c3c8d67a48c0","name":"update light","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"update_entity","areaId":[],"deviceId":[],"entityId":["{{light}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":350,"y":80,"wires":[["08118557855d00f9"]]},{"id":"472bf8c98659ee6d","type":"api-call-service","z":"4d31c3c8d67a48c0","name":"reset update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":870,"y":80,"wires":[["16a9ef0aa54c309b"]]},{"id":"08118557855d00f9","type":"api-call-service","z":"4d31c3c8d67a48c0","name":"reset auto","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{auto}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":530,"y":80,"wires":[["a8142f088b777240"]]},{"id":"a8142f088b777240","type":"api-call-service","z":"4d31c3c8d67a48c0","name":"reset undefined","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{undefined}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":80,"wires":[["472bf8c98659ee6d"]]},{"id":"16a9ef0aa54c309b","type":"api-call-service","z":"4d31c3c8d67a48c0","name":"reset called","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{called}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1030,"y":80,"wires":[["1eb862fd9135df3c"]]},{"id":"1eb862fd9135df3c","type":"junction","z":"4d31c3c8d67a48c0","x":1240,"y":80,"wires":[[]]},{"id":"cfd5a1be033911cb","type":"subflow","name":"light undefined","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"6a547c9e1bbcb98e"}]}],"out":[{"x":920,"y":80,"wires":[{"id":"3335073512b59bd7","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"3335073512b59bd7","type":"api-call-service","z":"cfd5a1be033911cb","name":"update on","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":710,"y":80,"wires":[[]]},{"id":"5a2d80b9346527c7","type":"api-call-service","z":"cfd5a1be033911cb","name":"update off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":410,"y":80,"wires":[["e9d80d9794c077f2"]]},{"id":"e9d80d9794c077f2","type":"delay","z":"cfd5a1be033911cb","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":560,"y":80,"wires":[["3335073512b59bd7"]]},{"id":"6a547c9e1bbcb98e","type":"api-call-service","z":"cfd5a1be033911cb","name":"clear light input select","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_first","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":220,"y":80,"wires":[["5a2d80b9346527c7"]]},{"id":"9f76a5ade8ccab89","type":"subflow","name":"light off","info":"","category":"light scene templates","in":[{"x":60,"y":80,"wires":[{"id":"2573f0977e5c7972"}]}],"out":[{"x":300,"y":80,"wires":[{"id":"2573f0977e5c7972","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"2573f0977e5c7972","type":"template","z":"9f76a5ade8ccab89","name":"off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\": {\n        \"transition\" : {{data.attributes.transition}} \n    }\n}","output":"json","x":170,"y":80,"wires":[[]],"icon":"node-red-contrib-color-convert/color-convert.png"},{"id":"63b85cf4dded34f1","type":"subflow","name":"color standard","info":"","category":"light scene templates","in":[{"x":120,"y":100,"wires":[{"id":"e3ad26547aaf6269"}]}],"out":[{"x":480,"y":120,"wires":[{"id":"2771706ff2d9ccad","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":480,"y":80,"wires":[{"id":"e3ad26547aaf6269","port":0}]}},{"id":"2771706ff2d9ccad","type":"template","z":"63b85cf4dded34f1","name":"hue standard","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{   \n    \"payload\" : \"{{light_scene}}\",\n    \"data\" : {\n        \"transition\" : {{data.attributes.transition}} ,\n        \"brightness\" : {{data.attributes.brightness}} ,\n        \"color_temp\" : {{data.attributes.color_temp}}  \n    }\n}","output":"json","x":320,"y":120,"wires":[[]],"icon":"node-red-contrib-color-convert/color-convert.png"},{"id":"e3ad26547aaf6269","type":"change","z":"63b85cf4dded34f1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":80,"wires":[["2771706ff2d9ccad"]]},{"id":"2c41a6d36fab0f47","type":"subflow","name":"input select options patio off","info":"","category":"input select options","in":[{"x":100,"y":80,"wires":[{"id":"40a0e79874fd7b3f"}]}],"out":[{"x":500,"y":80,"wires":[{"id":"40a0e79874fd7b3f","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"40a0e79874fd7b3f","type":"template","z":"2c41a6d36fab0f47","name":"input select options patio off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Off\",\n        \"Turn On\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\",\n        \"{{global.light_scene.falcon.scene_01}}\",\n        \"{{global.light_scene.falcon.scene_02}}\",\n        \"{{global.light_scene.falcon.scene_03}}\",\n        \"{{global.light_scene.falcon.scene_04}}\",\n        \"{{global.light_scene.falcon.scene_05}}\",\n        \"{{global.light_scene.falcon.scene_06}}\",\n        \"{{global.light_scene.falcon.scene_07}}\",\n        \"{{global.light_scene.falcon.scene_08}}\",\n        \"{{global.light_scene.falcon.scene_09}}\",\n        \"{{global.light_scene.falcon.scene_10}}\",\n        \"{{global.light_scene.falcon.scene_11}}\",\n        \"{{global.light_scene.falcon.scene_12}}\",\n        \"{{global.light_scene.falcon.scene_13}}\",\n        \"{{global.light_scene.falcon.scene_14}}\"\n        ] \n    }\n}","output":"json","x":300,"y":80,"wires":[[]]},{"id":"1efcb9682ed1d4ef","type":"subflow","name":"input select options patio random","info":"","category":"input select options","in":[{"x":60,"y":80,"wires":[{"id":"6558c52c95629a4e"}]}],"out":[{"x":500,"y":80,"wires":[{"id":"6558c52c95629a4e","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"6558c52c95629a4e","type":"template","z":"1efcb9682ed1d4ef","name":"input select options patio random","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Random\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\",\n        \"{{global.light_scene.falcon.scene_01}}\",\n        \"{{global.light_scene.falcon.scene_02}}\",\n        \"{{global.light_scene.falcon.scene_03}}\",\n        \"{{global.light_scene.falcon.scene_04}}\",\n        \"{{global.light_scene.falcon.scene_05}}\",\n        \"{{global.light_scene.falcon.scene_06}}\",\n        \"{{global.light_scene.falcon.scene_07}}\",\n        \"{{global.light_scene.falcon.scene_08}}\",\n        \"{{global.light_scene.falcon.scene_09}}\",\n        \"{{global.light_scene.falcon.scene_10}}\",\n        \"{{global.light_scene.falcon.scene_11}}\",\n        \"{{global.light_scene.falcon.scene_12}}\",\n        \"{{global.light_scene.falcon.scene_13}}\",\n        \"{{global.light_scene.falcon.scene_14}}\"\n        ] \n    }\n}","output":"json","x":280,"y":80,"wires":[[]]},{"id":"fd2ff9f3f5b11066","type":"subflow","name":"input select options patio undefined","info":"","category":"input select options","in":[{"x":40,"y":80,"wires":[{"id":"e21cc0058f6c3287"}]}],"out":[{"x":500,"y":80,"wires":[{"id":"e21cc0058f6c3287","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"e21cc0058f6c3287","type":"template","z":"fd2ff9f3f5b11066","name":"input select options patio undefined","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Undefined\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\",\n        \"{{global.light_scene.falcon.scene_01}}\",\n        \"{{global.light_scene.falcon.scene_02}}\",\n        \"{{global.light_scene.falcon.scene_03}}\",\n        \"{{global.light_scene.falcon.scene_04}}\",\n        \"{{global.light_scene.falcon.scene_05}}\",\n        \"{{global.light_scene.falcon.scene_06}}\",\n        \"{{global.light_scene.falcon.scene_07}}\",\n        \"{{global.light_scene.falcon.scene_08}}\",\n        \"{{global.light_scene.falcon.scene_09}}\",\n        \"{{global.light_scene.falcon.scene_10}}\",\n        \"{{global.light_scene.falcon.scene_11}}\",\n        \"{{global.light_scene.falcon.scene_12}}\",\n        \"{{global.light_scene.falcon.scene_13}}\",\n        \"{{global.light_scene.falcon.scene_14}}\"\n        ] \n    }\n}","output":"json","x":270,"y":80,"wires":[[]]},{"id":"c6511c9f3ac2c88f","type":"subflow","name":"input select options patio","info":"","category":"input select options","in":[{"x":20,"y":80,"wires":[{"id":"99c69605d7eda0d0"}]}],"out":[{"x":360,"y":80,"wires":[{"id":"99c69605d7eda0d0","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"99c69605d7eda0d0","type":"template","z":"c6511c9f3ac2c88f","name":"input select options patio","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\",\n        \"{{global.light_scene.falcon.scene_01}}\",\n        \"{{global.light_scene.falcon.scene_02}}\",\n        \"{{global.light_scene.falcon.scene_03}}\",\n        \"{{global.light_scene.falcon.scene_04}}\",\n        \"{{global.light_scene.falcon.scene_05}}\",\n        \"{{global.light_scene.falcon.scene_06}}\",\n        \"{{global.light_scene.falcon.scene_07}}\",\n        \"{{global.light_scene.falcon.scene_08}}\",\n        \"{{global.light_scene.falcon.scene_09}}\",\n        \"{{global.light_scene.falcon.scene_10}}\",\n        \"{{global.light_scene.falcon.scene_11}}\",\n        \"{{global.light_scene.falcon.scene_12}}\",\n        \"{{global.light_scene.falcon.scene_13}}\",\n        \"{{global.light_scene.falcon.scene_14}}\"\n        ] \n    }\n}","output":"json","x":210,"y":80,"wires":[[]]},{"id":"85c8354dbecae897","type":"subflow","name":"input select options hue off","info":"","category":"input select options","in":[{"x":0,"y":80,"wires":[{"id":"75f51b4487f92ff5"}]}],"out":[{"x":400,"y":80,"wires":[{"id":"75f51b4487f92ff5","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"75f51b4487f92ff5","type":"template","z":"85c8354dbecae897","name":"input select options hue off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Off\",\n        \"Turn On\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\"\n        ] \n    }\n}","output":"json","x":200,"y":80,"wires":[[]]},{"id":"abddae2f9382636e","type":"subflow","name":"input select options hue random","info":"","category":"input select options","in":[{"x":-20,"y":80,"wires":[{"id":"2e7853d3cac46dea"}]}],"out":[{"x":400,"y":80,"wires":[{"id":"2e7853d3cac46dea","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"2e7853d3cac46dea","type":"template","z":"abddae2f9382636e","name":"input select options hue random","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Random\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\"\n        ] \n    }\n}","output":"json","x":190,"y":80,"wires":[[]]},{"id":"a56c01d5e34949e6","type":"subflow","name":"input select options hue undefined","info":"","category":"input select options","in":[{"x":-20,"y":80,"wires":[{"id":"622ed0e96097b7b1"}]}],"out":[{"x":420,"y":80,"wires":[{"id":"622ed0e96097b7b1","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"622ed0e96097b7b1","type":"template","z":"a56c01d5e34949e6","name":"input select options hue undefined","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Undefined\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\"\n        ] \n    }\n}","output":"json","x":200,"y":80,"wires":[[]]},{"id":"0e93a473e88af3fd","type":"subflow","name":"input select options basic off","info":"","category":"input select options","in":[{"x":0,"y":80,"wires":[{"id":"c4b69214ecb955e2"}]}],"out":[{"x":400,"y":80,"wires":[{"id":"c4b69214ecb955e2","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"c4b69214ecb955e2","type":"template","z":"0e93a473e88af3fd","name":"input select options basic off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn On\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Off\"\n        ] \n    }\n}","output":"json","x":200,"y":80,"wires":[[]]},{"id":"4a371c0a50a6b75f","type":"subflow","name":"input select options basic undefined","info":"","category":"input select options","in":[{"x":-40,"y":80,"wires":[{"id":"2b02d9af8e4cce79"}]}],"out":[{"x":420,"y":80,"wires":[{"id":"2b02d9af8e4cce79","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"2b02d9af8e4cce79","type":"template","z":"4a371c0a50a6b75f","name":"input select options basic undefined","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Undefined\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\"\n        ] \n    }\n}","output":"json","x":190,"y":80,"wires":[[]]},{"id":"281c25a193be97e3","type":"subflow","name":"input select options on/off off","info":"","category":"input select options","in":[{"x":0,"y":80,"wires":[{"id":"ac60c4385915fe6a"}]}],"out":[{"x":400,"y":80,"wires":[{"id":"ac60c4385915fe6a","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"ac60c4385915fe6a","type":"template","z":"281c25a193be97e3","name":"input select options on/off off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn On\",\n        \"Turn Off\",\n        \"Off\"\n        ] \n    }\n}","output":"json","x":200,"y":80,"wires":[[]]},{"id":"43f4a68c79d90c63","type":"subflow","name":"input select options on/off on","info":"","category":"input select options","in":[{"x":0,"y":80,"wires":[{"id":"334f484cc96a66bf"}]}],"out":[{"x":400,"y":80,"wires":[{"id":"334f484cc96a66bf","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"334f484cc96a66bf","type":"template","z":"43f4a68c79d90c63","name":"input select options on/off on","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn On\",\n        \"Turn Off\",\n        \"On\"\n        ] \n    }\n}","output":"json","x":200,"y":80,"wires":[[]]},{"id":"d03aaf41d665b3ae","type":"subflow","name":"input select options basic","info":"","category":"input select options","in":[{"x":60,"y":80,"wires":[{"id":"18ff938e27cb78d3"}]}],"out":[{"x":440,"y":80,"wires":[{"id":"18ff938e27cb78d3","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"18ff938e27cb78d3","type":"template","z":"d03aaf41d665b3ae","name":"input select options basic","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\"\n        ] \n    }\n}","output":"json","x":244,"y":79,"wires":[[]]},{"id":"445453ae45a2b568","type":"subflow","name":"input select options on/off","info":"","category":"input select options","in":[{"x":40,"y":80,"wires":[{"id":"8e6c8781d5da5776"}]}],"out":[{"x":340,"y":80,"wires":[{"id":"8e6c8781d5da5776","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"8e6c8781d5da5776","type":"template","z":"445453ae45a2b568","name":"input select options on/off","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn On\",\n        \"Turn Off\"\n        ] \n    }\n}","output":"json","x":190,"y":80,"wires":[[]]},{"id":"487d7fedac444ca9","type":"subflow","name":"input select options hue","info":"","category":"input select options","in":[{"x":40,"y":80,"wires":[{"id":"796fdc809a6fded9"}]}],"out":[{"x":420,"y":80,"wires":[{"id":"796fdc809a6fded9","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"796fdc809a6fded9","type":"template","z":"487d7fedac444ca9","name":"input select options hue","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\" : {\n        \"options\" : [\n        \"--Select--\",\n        \"Turn Off\",\n        \"Maximum\",\n        \"Bright\",\n        \"Normal\",\n        \"Soft\",\n        \"Low\",\n        \"Night\",\n        \"Spectrum\",\n        \"Shuffle\",\n        \"{{global.light_scene.hue.scene_01}}\",\n        \"{{global.light_scene.hue.scene_02}}\",\n        \"{{global.light_scene.hue.scene_03}}\",\n        \"{{global.light_scene.hue.scene_04}}\",\n        \"{{global.light_scene.hue.scene_05}}\",\n        \"{{global.light_scene.hue.scene_06}}\",\n        \"{{global.light_scene.hue.scene_07}}\",\n        \"{{global.light_scene.hue.scene_08}}\",\n        \"{{global.light_scene.hue.scene_09}}\",\n        \"{{global.light_scene.hue.scene_10}}\",\n        \"{{global.light_scene.hue.scene_11}}\",\n        \"{{global.light_scene.hue.scene_12}}\",\n        \"{{global.light_scene.hue.scene_13}}\",\n        \"{{global.light_scene.hue.scene_14}}\",\n        \"{{global.light_scene.hue.scene_15}}\",\n        \"{{global.light_scene.hue.scene_16}}\"\n        ] \n    }\n}","output":"json","x":230,"y":80,"wires":[[]]},{"id":"c29568126d8ba07b","type":"subflow","name":"input select set","info":"","category":"light scenes","in":[{"x":60,"y":80,"wires":[{"id":"0eba5dc6407857f3"}]}],"out":[{"x":1140,"y":100,"wires":[{"id":"bf9a83e62e1fccdf","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":1140,"y":60,"wires":[{"id":"bf9a83e62e1fccdf","port":0}]}},{"id":"1f06cd56295a62cd","type":"switch","z":"c29568126d8ba07b","name":"input select","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"input_select.desk_lamp","vt":"str"},{"t":"eq","v":"input_select.network_closet_light","vt":"str"},{"t":"eq","v":"input_select.patio_lights","vt":"str"},{"t":"eq","v":"input_select.patio_light_strip","vt":"str"},{"t":"eq","v":"input_select.patio_light_strip_virtual","vt":"str"},{"t":"eq","v":"input_select.patio_spotlights","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":7,"x":230,"y":220,"wires":[["ce442b85defe9c84"],["0ef2e141d342d705"],["91726d027201374a"],["91726d027201374a"],["91726d027201374a"],["91726d027201374a"],["04aa7d307ce2b000"]]},{"id":"86b3a3b0daf3f76c","type":"change","z":"c29568126d8ba07b","name":"set payload","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":80,"wires":[["bf9a83e62e1fccdf"]]},{"id":"0eba5dc6407857f3","type":"change","z":"c29568126d8ba07b","name":"set flow","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"light_scene","tot":"msg"},{"t":"set","p":"topic","pt":"flow","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":80,"wires":[["57cac74c81e8137f"]]},{"id":"e3a8e4e55b6fbd8e","type":"subflow:487d7fedac444ca9","z":"c29568126d8ba07b","name":"","x":550,"y":520,"wires":[["fc1a8e862f4b0831"]]},{"id":"37903f9c697097e4","type":"link out","z":"c29568126d8ba07b","name":"output","mode":"link","links":["90fa5a94d3720625"],"x":1505,"y":440,"wires":[]},{"id":"90fa5a94d3720625","type":"link in","z":"c29568126d8ba07b","name":"output","links":["37903f9c697097e4","53ed7862fae1b953","c967178b7c4f0557","47ec0e0edbb540cd"],"x":585,"y":80,"wires":[["ddf9ed8869ed051f"]]},{"id":"57cac74c81e8137f","type":"link out","z":"c29568126d8ba07b","name":"input select","mode":"link","links":["4ca9f14835491b21"],"x":435,"y":80,"wires":[]},{"id":"e5bc366a9bd457be","type":"subflow:445453ae45a2b568","z":"c29568126d8ba07b","name":"","x":550,"y":1160,"wires":[["db9cdb8ff657204f"]]},{"id":"48d6cb0351dd61bf","type":"subflow:d03aaf41d665b3ae","z":"c29568126d8ba07b","name":"","x":530,"y":940,"wires":[["90253eb740664b33"]]},{"id":"df5a6633c919286b","type":"switch","z":"c29568126d8ba07b","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"On","vt":"str"},{"t":"eq","v":"Turn On","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"Turn Off","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":250,"y":1120,"wires":[["49b78afed9cba7f6"],["49b78afed9cba7f6"],["aa9af573c80ead27"],["aa9af573c80ead27"],["e5bc366a9bd457be"]]},{"id":"4ca9f14835491b21","type":"link in","z":"c29568126d8ba07b","name":"input select","links":["57cac74c81e8137f"],"x":125,"y":220,"wires":[["1f06cd56295a62cd"]]},{"id":"32cfa27ab5a3fef6","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1110,"y":480,"wires":[["b7f26c490ba5f044"]]},{"id":"b7f26c490ba5f044","type":"api-call-service","z":"c29568126d8ba07b","name":"input select option","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"{{flow.light_scene}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1330,"y":480,"wires":[["91a4e010cd00d41c"]]},{"id":"b4e6fae1d98a8e02","type":"switch","z":"c29568126d8ba07b","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Shuffle","vt":"str"},{"t":"eq","v":"Random","vt":"str"},{"t":"eq","v":"Turn On","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":9,"x":250,"y":460,"wires":[["3cd89cca76b0450a"],["3cd89cca76b0450a"],["43505c01a131a6f8"],["43505c01a131a6f8"],["882a4dab5029936b"],["882a4dab5029936b"],["882a4dab5029936b"],["882a4dab5029936b"],["e3a8e4e55b6fbd8e"]]},{"id":"04aa7d307ce2b000","type":"link out","z":"c29568126d8ba07b","name":"hue lights","mode":"link","links":["efc4c31d71101371","75b6193c1ef1f001","7c8117073a5e17cd"],"x":385,"y":280,"wires":[]},{"id":"efc4c31d71101371","type":"link in","z":"c29568126d8ba07b","name":"link in 109","links":["04aa7d307ce2b000"],"x":125,"y":460,"wires":[["b4e6fae1d98a8e02"]]},{"id":"a9a8e27a0517699e","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1090,"y":440,"wires":[["0492ca3640abea1f"]]},{"id":"0492ca3640abea1f","type":"api-call-service","z":"c29568126d8ba07b","name":"input select random","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Random\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1320,"y":440,"wires":[["91a4e010cd00d41c"]]},{"id":"5ecb363bd3ac242c","type":"api-call-service","z":"c29568126d8ba07b","name":"input select off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1340,"y":400,"wires":[["91a4e010cd00d41c"]]},{"id":"8a9efacd71aa2f3d","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"str"}],"queue":"none","x":1130,"y":400,"wires":[["5ecb363bd3ac242c"]]},{"id":"53ed7862fae1b953","type":"link out","z":"c29568126d8ba07b","name":"output","mode":"link","links":["90fa5a94d3720625","57c6fbacbd73c4f4","88da239afaf37507"],"x":1425,"y":660,"wires":[]},{"id":"91726d027201374a","type":"link out","z":"c29568126d8ba07b","name":"patio light strip","mode":"link","links":["7b845134610f955a"],"x":385,"y":240,"wires":[]},{"id":"7b845134610f955a","type":"link in","z":"c29568126d8ba07b","name":"patio light strip","links":["91726d027201374a","f8133d6bc5e84c4c","f9c56cc720dc92a3"],"x":115,"y":680,"wires":[["c510f076ffce11f0"]]},{"id":"c967178b7c4f0557","type":"link out","z":"c29568126d8ba07b","name":"output","mode":"link","links":["90fa5a94d3720625","57c6fbacbd73c4f4","88da239afaf37507"],"x":1485,"y":880,"wires":[]},{"id":"73c1c3fc3e726d40","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1090,"y":900,"wires":[["de3aa293f595253b"]]},{"id":"de3aa293f595253b","type":"api-call-service","z":"c29568126d8ba07b","name":"input select option","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"{{flow.light_scene}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1310,"y":900,"wires":[["089f18b25baeb455"]]},{"id":"9538cb0eaa32dbb8","type":"switch","z":"c29568126d8ba07b","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"Turn On","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":230,"y":900,"wires":[["32d74d2dc69b5316"],["32d74d2dc69b5316"],["44913dbeb8b583a5"],["44913dbeb8b583a5"],["44913dbeb8b583a5"],["44913dbeb8b583a5"],["48d6cb0351dd61bf"]]},{"id":"0adaecd49d91d03d","type":"api-call-service","z":"c29568126d8ba07b","name":"input select off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1320,"y":860,"wires":[["089f18b25baeb455"]]},{"id":"1c7cd0d35b8d4631","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1110,"y":860,"wires":[["0adaecd49d91d03d"]]},{"id":"0ef2e141d342d705","type":"link out","z":"c29568126d8ba07b","name":"basic lights","mode":"link","links":["a5b9bff7a9e569f7"],"x":385,"y":200,"wires":[]},{"id":"a5b9bff7a9e569f7","type":"link in","z":"c29568126d8ba07b","name":"basic lights","links":["0ef2e141d342d705","83b14f4c86409938","9b0b0460e86fac9a"],"x":115,"y":900,"wires":[["9538cb0eaa32dbb8"]]},{"id":"ce442b85defe9c84","type":"link out","z":"c29568126d8ba07b","name":"on/off lights","mode":"link","links":["808c9293ec2a7dff"],"x":385,"y":160,"wires":[]},{"id":"808c9293ec2a7dff","type":"link in","z":"c29568126d8ba07b","name":"on/off lights","links":["ce442b85defe9c84","e0430a1e3d4f1051","036ae5b4d9d99cce"],"x":115,"y":1120,"wires":[["df5a6633c919286b"]]},{"id":"47ec0e0edbb540cd","type":"link out","z":"c29568126d8ba07b","name":"output","mode":"link","links":["90fa5a94d3720625","57c6fbacbd73c4f4","88da239afaf37507"],"x":1465,"y":1100,"wires":[]},{"id":"8c725e9bf9b37ea6","type":"api-call-service","z":"c29568126d8ba07b","name":"input select off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":1120,"wires":[["47313e390e1f1e3d"]]},{"id":"ab6c53d423d65df3","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"str"}],"queue":"none","x":1030,"y":1120,"wires":[["8c725e9bf9b37ea6"]]},{"id":"298244ee17cce146","type":"api-call-service","z":"c29568126d8ba07b","name":"input select on","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"On\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":1080,"wires":[["47313e390e1f1e3d"]]},{"id":"24664171b5d0ee55","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"str"}],"queue":"none","x":1030,"y":1080,"wires":[["298244ee17cce146"]]},{"id":"db9cdb8ff657204f","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"str"}],"queue":"none","x":1030,"y":1160,"wires":[["230a8c1177558057"]]},{"id":"230a8c1177558057","type":"api-call-service","z":"c29568126d8ba07b","name":"input select first","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_first","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":1160,"wires":[["47313e390e1f1e3d"]]},{"id":"c166fa225185f84a","type":"subflow:43f4a68c79d90c63","z":"c29568126d8ba07b","x":560,"y":1080,"wires":[["83911fecc1dfb180"]]},{"id":"3181e1301aacbf5b","type":"subflow:281c25a193be97e3","z":"c29568126d8ba07b","name":"","x":560,"y":1120,"wires":[["b91477ce1802f52a"]]},{"id":"52a12655309e2367","type":"subflow:4a371c0a50a6b75f","z":"c29568126d8ba07b","x":570,"y":900,"wires":[["90253eb740664b33"]]},{"id":"0a6d1e41ef609d81","type":"subflow:0e93a473e88af3fd","z":"c29568126d8ba07b","name":"","x":540,"y":860,"wires":[["a6dc4593687901bf"]]},{"id":"de60bfeb64037c63","type":"subflow:a56c01d5e34949e6","z":"c29568126d8ba07b","name":"","x":580,"y":480,"wires":[["fc1a8e862f4b0831"]]},{"id":"4b340fda6b67ac85","type":"subflow:abddae2f9382636e","z":"c29568126d8ba07b","name":"","x":570,"y":440,"wires":[["85ba7dff2c1b108c"]]},{"id":"5a90382be61959d4","type":"subflow:85c8354dbecae897","z":"c29568126d8ba07b","name":"","x":560,"y":400,"wires":[["655ba2788090d8b2"]]},{"id":"655ba2788090d8b2","type":"change","z":"c29568126d8ba07b","name":"off","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":400,"wires":[["8a9efacd71aa2f3d"]]},{"id":"2afd9312b0447152","type":"change","z":"c29568126d8ba07b","name":"off","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":860,"wires":[["1c7cd0d35b8d4631"]]},{"id":"b91477ce1802f52a","type":"change","z":"c29568126d8ba07b","name":"off","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1120,"wires":[["ab6c53d423d65df3"]]},{"id":"83911fecc1dfb180","type":"change","z":"c29568126d8ba07b","name":"on","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"On","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1080,"wires":[["24664171b5d0ee55"]]},{"id":"d77172e5ae30d649","type":"change","z":"c29568126d8ba07b","name":"random","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Random","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Random","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":440,"wires":[["a9a8e27a0517699e"]]},{"id":"858faf02be7f082b","type":"subflow:c6511c9f3ac2c88f","z":"c29568126d8ba07b","name":"","x":530,"y":740,"wires":[["5a05a1db6d9765a0"]]},{"id":"0f5b8bf6d0e24154","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1070,"y":700,"wires":[["58165290734e230a"]]},{"id":"58165290734e230a","type":"api-call-service","z":"c29568126d8ba07b","name":"input select option","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"{{flow.light_scene}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1290,"y":700,"wires":[["d9280ca6e47d2523"]]},{"id":"c510f076ffce11f0","type":"switch","z":"c29568126d8ba07b","name":"light scene","property":"light_scene","propertyType":"flow","rules":[{"t":"eq","v":"Off","vt":"str"},{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Shuffle","vt":"str"},{"t":"eq","v":"Random","vt":"str"},{"t":"eq","v":"Turn On","vt":"str"},{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Alert","vt":"str"},{"t":"eq","v":"--Select--","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":9,"x":230,"y":680,"wires":[["60639aae182eed28"],["60639aae182eed28"],["533f0cbe79a7a992"],["533f0cbe79a7a992"],["701f6edd6aa73a11"],["701f6edd6aa73a11"],["701f6edd6aa73a11"],["701f6edd6aa73a11"],["858faf02be7f082b"]]},{"id":"965ae9186267628e","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1030,"y":660,"wires":[["afe020122e7b662d"]]},{"id":"afe020122e7b662d","type":"api-call-service","z":"c29568126d8ba07b","name":"input select random","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Random\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"Random","valueType":"str"}],"queue":"none","x":1260,"y":660,"wires":[["d9280ca6e47d2523"]]},{"id":"9307f06472ed976d","type":"api-call-service","z":"c29568126d8ba07b","name":"input select off","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{\"option\":\"Off\"}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"Off","valueType":"str"}],"queue":"none","x":1280,"y":620,"wires":[["d9280ca6e47d2523"]]},{"id":"50e0f90172014199","type":"api-call-service","z":"c29568126d8ba07b","name":"input select set options","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"set_options","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"light_scene","valueType":"flow"}],"queue":"none","x":1070,"y":620,"wires":[["9307f06472ed976d"]]},{"id":"dc634f37e293a482","type":"subflow:fd2ff9f3f5b11066","z":"c29568126d8ba07b","name":"","x":570,"y":700,"wires":[["5a05a1db6d9765a0"]]},{"id":"4b381461b766b5bf","type":"subflow:1efcb9682ed1d4ef","z":"c29568126d8ba07b","x":560,"y":660,"wires":[["ee9c49854b152593"]]},{"id":"238348748995d526","type":"subflow:2c41a6d36fab0f47","z":"c29568126d8ba07b","name":"","x":540,"y":620,"wires":[["80d33b58d8e12805"]]},{"id":"bd72d649246fe811","type":"change","z":"c29568126d8ba07b","name":"off","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":620,"wires":[["50e0f90172014199"]]},{"id":"5ca216e010b26315","type":"change","z":"c29568126d8ba07b","name":"random","rules":[{"t":"set","p":"light_scene","pt":"flow","to":"Random","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Random","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":660,"wires":[["965ae9186267628e"]]},{"id":"ddf9ed8869ed051f","type":"api-call-service","z":"c29568126d8ba07b","name":"update input select","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"update_entity","areaId":[],"deviceId":[],"entityId":["{{flow.topic}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":750,"y":80,"wires":[["86b3a3b0daf3f76c"]]},{"id":"bf9a83e62e1fccdf","type":"junction","z":"c29568126d8ba07b","x":1080,"y":80,"wires":[[]]},{"id":"fc1a8e862f4b0831","type":"junction","z":"c29568126d8ba07b","x":780,"y":480,"wires":[["32cfa27ab5a3fef6"]]},{"id":"91a4e010cd00d41c","type":"junction","z":"c29568126d8ba07b","x":1460,"y":440,"wires":[["37903f9c697097e4"]]},{"id":"85ba7dff2c1b108c","type":"junction","z":"c29568126d8ba07b","x":780,"y":440,"wires":[["d77172e5ae30d649"]]},{"id":"3cd89cca76b0450a","type":"junction","z":"c29568126d8ba07b","x":340,"y":420,"wires":[["5a90382be61959d4"]]},{"id":"43505c01a131a6f8","type":"junction","z":"c29568126d8ba07b","x":340,"y":440,"wires":[["4b340fda6b67ac85"]]},{"id":"90253eb740664b33","type":"junction","z":"c29568126d8ba07b","x":760,"y":900,"wires":[["73c1c3fc3e726d40"]]},{"id":"a6dc4593687901bf","type":"junction","z":"c29568126d8ba07b","x":760,"y":860,"wires":[["2afd9312b0447152"]]},{"id":"089f18b25baeb455","type":"junction","z":"c29568126d8ba07b","x":1440,"y":880,"wires":[["c967178b7c4f0557"]]},{"id":"32d74d2dc69b5316","type":"junction","z":"c29568126d8ba07b","x":320,"y":880,"wires":[["0a6d1e41ef609d81"]]},{"id":"47313e390e1f1e3d","type":"junction","z":"c29568126d8ba07b","x":1420,"y":1100,"wires":[["47ec0e0edbb540cd"]]},{"id":"882a4dab5029936b","type":"junction","z":"c29568126d8ba07b","x":340,"y":480,"wires":[["de60bfeb64037c63"]]},{"id":"44913dbeb8b583a5","type":"junction","z":"c29568126d8ba07b","x":320,"y":900,"wires":[["52a12655309e2367"]]},{"id":"aa9af573c80ead27","type":"junction","z":"c29568126d8ba07b","x":340,"y":1120,"wires":[["3181e1301aacbf5b"]]},{"id":"49b78afed9cba7f6","type":"junction","z":"c29568126d8ba07b","x":340,"y":1100,"wires":[["c166fa225185f84a"]]},{"id":"5a05a1db6d9765a0","type":"junction","z":"c29568126d8ba07b","x":760,"y":700,"wires":[["0f5b8bf6d0e24154"]]},{"id":"80d33b58d8e12805","type":"junction","z":"c29568126d8ba07b","x":760,"y":620,"wires":[["bd72d649246fe811"]]},{"id":"d9280ca6e47d2523","type":"junction","z":"c29568126d8ba07b","x":1400,"y":660,"wires":[["53ed7862fae1b953"]]},{"id":"ee9c49854b152593","type":"junction","z":"c29568126d8ba07b","x":760,"y":660,"wires":[["5ca216e010b26315"]]},{"id":"60639aae182eed28","type":"junction","z":"c29568126d8ba07b","x":320,"y":640,"wires":[["238348748995d526"]]},{"id":"533f0cbe79a7a992","type":"junction","z":"c29568126d8ba07b","x":320,"y":660,"wires":[["4b381461b766b5bf"]]},{"id":"701f6edd6aa73a11","type":"junction","z":"c29568126d8ba07b","x":320,"y":700,"wires":[["dc634f37e293a482"]]},{"id":"d4648be7103d370a","type":"subflow","name":"color random","info":"","category":"light scene templates","in":[{"x":60,"y":80,"wires":[{"id":"301a3937e385454b"}]}],"out":[{"x":800,"y":80,"wires":[{"id":"7ea7e1cb61b1198b","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"7ea7e1cb61b1198b","type":"template","z":"d4648be7103d370a","name":"package","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"data\": {\n        \"transition\" : {{flow.data.attributes.transition}} ,\n        \"brightness\" : {{flow.data.attributes.brightness}} ,\n        \"hs_color\": [{{payload}},100] \n    }\n}","output":"json","x":540,"y":80,"wires":[[]],"icon":"node-red-contrib-color-convert/color-convert.png"},{"id":"85455dddc2faae41","type":"random","z":"d4648be7103d370a","name":"","low":"0","high":"360","inte":"true","property":"payload","x":400,"y":80,"wires":[["7ea7e1cb61b1198b"]]},{"id":"301a3937e385454b","type":"change","z":"d4648be7103d370a","name":"flow","rules":[{"t":"set","p":"data.attributes.transition","pt":"flow","to":"data.attributes.transition","tot":"msg"},{"t":"set","p":"data.attributes.brightness","pt":"flow","to":"data.attributes.brightness","tot":"msg"},{"t":"set","p":"light_scene","pt":"msg","to":"Shuffle","tot":"str"},{"t":"set","p":"light_scene","pt":"flow","to":"Shuffle","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":80,"wires":[["85455dddc2faae41"]]},{"id":"261b21bd8f270ab0","type":"subflow","name":"light scenes color","info":"","category":"light scenes","in":[{"x":60,"y":60,"wires":[{"id":"ab575366cc9fa87d"}]}],"out":[{"x":1480,"y":80,"wires":[{"id":"6cff516aa16ae613","port":0}]},{"x":1480,"y":120,"wires":[{"id":"e66261079af68aad","port":0}]},{"x":1480,"y":160,"wires":[{"id":"897c7bb47a01571f","port":0}]},{"x":1480,"y":200,"wires":[{"id":"5d4c72ef87b8b022","port":0}]},{"x":1480,"y":240,"wires":[{"id":"91755e2067adc601","port":0}]},{"x":1480,"y":280,"wires":[{"id":"ecab9665429b1dbd","port":0}]},{"x":1480,"y":320,"wires":[{"id":"d93822e29f496cf1","port":0}]},{"x":1480,"y":360,"wires":[{"id":"ab96f7dba75503aa","port":0}]},{"x":1480,"y":420,"wires":[{"id":"497977836f6d4b26","port":0}]},{"x":1480,"y":480,"wires":[{"id":"6ac1a5d402ab50c0","port":0}]},{"x":1480,"y":620,"wires":[{"id":"50a77f98f145cea6","port":0}]},{"x":1480,"y":820,"wires":[{"id":"7cf94645d94aa94b","port":0}]},{"x":1480,"y":920,"wires":[{"id":"e226e63d7b96d81d","port":30}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":490,"y":40,"wires":[{"id":"38d1c36caa960691","port":0}]}},{"id":"d325f2941f992276","type":"switch","z":"261b21bd8f270ab0","name":"light scenes","property":"light_scene","propertyType":"msg","rules":[{"t":"eq","v":"Undefined","vt":"str"},{"t":"eq","v":"Turn Off","vt":"str"},{"t":"eq","v":"Maximum","vt":"str"},{"t":"eq","v":"Bright","vt":"str"},{"t":"eq","v":"Normal","vt":"str"},{"t":"eq","v":"Soft","vt":"str"},{"t":"eq","v":"Low","vt":"str"},{"t":"eq","v":"Night","vt":"str"},{"t":"eq","v":"Random","vt":"str"},{"t":"eq","v":"Shuffle","vt":"str"},{"t":"eq","v":"Spectrum","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":12,"x":250,"y":280,"wires":[["6cff516aa16ae613"],["e66261079af68aad"],["897c7bb47a01571f"],["5d4c72ef87b8b022"],["91755e2067adc601"],["ecab9665429b1dbd"],["d93822e29f496cf1"],["ab96f7dba75503aa"],["81c9b727d59e253d"],["81c9b727d59e253d"],["6ac1a5d402ab50c0"],["e226e63d7b96d81d"]]},{"id":"e66261079af68aad","type":"change","z":"261b21bd8f270ab0","name":"Turn Off","rules":[{"t":"set","p":"payload","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Turn Off","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"153","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":120,"wires":[[]]},{"id":"897c7bb47a01571f","type":"change","z":"261b21bd8f270ab0","name":"Maximum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Maximum","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"251","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"250","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"26.812","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"34.87","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"205","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"166","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":160,"wires":[[]]},{"id":"5d4c72ef87b8b022","type":"change","z":"261b21bd8f270ab0","name":"Bright","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Bright","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"191","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"300","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"27.355","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"48.529","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"187","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"131","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":200,"wires":[[]]},{"id":"91755e2067adc601","type":"change","z":"261b21bd8f270ab0","name":"Normal","rules":[{"t":"set","p":"payload","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Normal","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"127","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"350","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"28.077","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"60.925","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"172","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":240,"wires":[[]]},{"id":"ecab9665429b1dbd","type":"change","z":"261b21bd8f270ab0","name":"Soft","rules":[{"t":"set","p":"payload","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Soft","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"63","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"375","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"28.47","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"66.821","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"165","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"84","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":280,"wires":[[]]},{"id":"d93822e29f496cf1","type":"change","z":"261b21bd8f270ab0","name":"Low","rules":[{"t":"set","p":"payload","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Low","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"31","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"400","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"28.874","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"72.522","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"159","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"70","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":320,"wires":[[]]},{"id":"ab96f7dba75503aa","type":"change","z":"261b21bd8f270ab0","name":"Night","rules":[{"t":"set","p":"payload","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Night","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"1","tot":"num"},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"color_temp","tot":"str"},{"t":"set","p":"data.attributes.color_temp","pt":"msg","to":"425","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"29.294","tot":"num"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"78.165","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"255","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"152","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"55","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":360,"wires":[[]]},{"id":"50a77f98f145cea6","type":"change","z":"261b21bd8f270ab0","name":"Hue Scene","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"light_scene","tot":"msg"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"brightness","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":620,"wires":[[]]},{"id":"6cff516aa16ae613","type":"change","z":"261b21bd8f270ab0","name":"Undefined","rules":[{"t":"set","p":"payload","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Undefined","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Undefined","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":80,"wires":[[]]},{"id":"15615546e5c1a927","type":"link out","z":"261b21bd8f270ab0","name":"called","mode":"link","links":["95f9d7b4956cb2e4"],"x":485,"y":100,"wires":[]},{"id":"95f9d7b4956cb2e4","type":"link in","z":"261b21bd8f270ab0","name":"called","links":["15615546e5c1a927"],"x":115,"y":280,"wires":[["f0a94bee48600750"]]},{"id":"ab575366cc9fa87d","type":"change","z":"261b21bd8f270ab0","name":"payload light scene","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":60,"wires":[["38d1c36caa960691"]]},{"id":"7cf94645d94aa94b","type":"change","z":"261b21bd8f270ab0","name":"Falcon Scene","rules":[{"t":"set","p":"payload","pt":"msg","to":"light_scene","tot":"msg"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":820,"wires":[[]]},{"id":"888025ea6dbf1131","type":"debug","z":"261b21bd8f270ab0","name":"light scenes color unknown scene","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":540,"y":980,"wires":[]},{"id":"6ac1a5d402ab50c0","type":"change","z":"261b21bd8f270ab0","name":"Spectrum","rules":[{"t":"set","p":"payload","pt":"msg","to":"Spectrum","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Spectrum","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Spectrum","tot":"str"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"brightness","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":480,"wires":[[]]},{"id":"e226e63d7b96d81d","type":"switch","z":"261b21bd8f270ab0","name":"defined scenes","property":"light_scene","propertyType":"msg","rules":[{"t":"eq","v":"light_scene.hue.scene_01","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_02","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_03","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_04","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_05","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_06","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_07","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_08","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_09","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_10","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_11","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_12","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_13","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_14","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_15","vt":"global"},{"t":"eq","v":"light_scene.hue.scene_16","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_01","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_02","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_03","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_04","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_05","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_06","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_07","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_08","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_09","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_10","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_11","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_12","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_13","vt":"global"},{"t":"eq","v":"light_scene.falcon.scene_14","vt":"global"},{"t":"else"}],"checkall":"false","repair":false,"outputs":31,"x":200,"y":720,"wires":[["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["d49a160907c243b9"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["fa7d40df93b1ed83"],["888025ea6dbf1131"]]},{"id":"497977836f6d4b26","type":"change","z":"261b21bd8f270ab0","name":"Shuffle","rules":[{"t":"set","p":"payload","pt":"msg","to":"Shuffle","tot":"str"},{"t":"set","p":"data.attributes.light_scene","pt":"msg","to":"Shuffle","tot":"str"},{"t":"set","p":"light_scene","pt":"msg","to":"Shuffle","tot":"str"},{"t":"set","p":"data.attributes.transition","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"data.attributes.brightness","pt":"msg","to":"brightness","tot":"msg","dc":true},{"t":"set","p":"data.attributes.color_mode","pt":"msg","to":"xy","tot":"str"},{"t":"set","p":"data.attributes.hs_color[0]","pt":"msg","to":"","tot":"num"},{"t":"set","p":"data.attributes.hs_color[1]","pt":"msg","to":"","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[0]","pt":"msg","to":"","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[1]","pt":"msg","to":"","tot":"num"},{"t":"set","p":"data.attributes.rgb_color[2]","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":420,"wires":[[]]},{"id":"38d1c36caa960691","type":"junction","z":"261b21bd8f270ab0","x":430,"y":60,"wires":[["15615546e5c1a927"]]},{"id":"d49a160907c243b9","type":"junction","z":"261b21bd8f270ab0","x":400,"y":620,"wires":[["50a77f98f145cea6"]]},{"id":"fa7d40df93b1ed83","type":"junction","z":"261b21bd8f270ab0","x":400,"y":820,"wires":[["7cf94645d94aa94b"]]},{"id":"81c9b727d59e253d","type":"junction","z":"261b21bd8f270ab0","x":340,"y":320,"wires":[["497977836f6d4b26"]]},{"id":"f0a94bee48600750","type":"junction","z":"261b21bd8f270ab0","x":160,"y":280,"wires":[["d325f2941f992276"]]},{"id":"cebdeac71a09496f","type":"tab","label":"Dining Room Lights (Credenza Lamp)","disabled":false,"info":"","env":[]},{"id":"26ceb207ae4db229","type":"group","z":"cebdeac71a09496f","name":"","style":{"stroke":"#ff0000","fill":"#001f60","label":true},"nodes":["a2f5654d2dd13025"],"x":2,"y":7,"w":2256,"h":1246},{"id":"a2f5654d2dd13025","type":"group","z":"cebdeac71a09496f","g":"26ceb207ae4db229","name":"","style":{"stroke":"#ffff00","fill":"#9363b7","label":true},"nodes":["1f74c54d6bc84bb8","47aecf67f8d3ed53","63cd2e913e0c3815","4dc3e146e8138909","cfbd61aa26717386","01bdc4097c7467ae","f7b34fa378ea3c48","3b47f7bc9894d265","c6dfb9a4d9f7d48e","344bcbca55cab7a0","6eb6441f8e788ac6","727fb0dc0acf7387","ed5b3a357b3ce33c","8ce239030b7ed7d7","cb503c962dd4ec11","251eab4148c827bd","02c25251fede9906"],"x":28,"y":33,"w":2204,"h":1194},{"id":"1f74c54d6bc84bb8","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["7a04e49bcc0b904b","123f5c72ecda76cf","2401a6c156994b2b","576a5a82f0773e88","f4f8d912145aca6b"],"x":1454,"y":1079,"w":752,"h":122},{"id":"47aecf67f8d3ed53","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["121a2ef4205d2828","47f4d57b2bb5e85f","f3b14be2c7b13349","5be6f47f3dad16c8"],"x":434,"y":319,"w":272,"h":384.5},{"id":"63cd2e913e0c3815","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Credenza Lamp Auto Select","style":{"label":true,"stroke":"#000000","fill":"#3f3f3f"},"nodes":["88fed719ebfcbcb4"],"x":54,"y":59,"w":192,"h":82},{"id":"4dc3e146e8138909","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Credenza Lamp Undefined","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["0834a3a713b5864b"],"x":54,"y":979,"w":192,"h":82},{"id":"cfbd61aa26717386","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Credenza Lamp Update","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["b4837730a4484b1a"],"x":54,"y":1099,"w":192,"h":82},{"id":"01bdc4097c7467ae","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["c72cc694dbb70ee6"],"x":1194,"y":1099,"w":192,"h":82},{"id":"f7b34fa378ea3c48","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Credenza Lamp Input Select","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["7e9690e27a652a7c"],"x":54,"y":479,"w":192,"h":82},{"id":"3b47f7bc9894d265","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Standard Scene Triggers","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["b261b296bfb9e3b0","66fe52d4572bc395","0120996a5898a4b4","28594f05beadec83","79e67f928da5f42d","95da107f943a6119","e486607c9de13489","f3aa836183ae9a17","a4e1d7e6c63a327b","6ae767dd751ccd9b","da50ae885a6cf0cf","02b91bdafa9723aa","16c8528a706c9254","d915a4658baffc6f"],"x":1194,"y":219,"w":217,"h":742},{"id":"c6dfb9a4d9f7d48e","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","name":"Standard Scenes","style":{"stroke":"#000000","fill":"#3f3f3f","label":true},"nodes":["89b2f32f13c4f037","7afcf91e52d8a219","c8c7050825dc64c6","b0961b3222c8f231","4cd52f02459674db","942b628c82eaabf7","5cac0b52770d5eb9","13613451a14979be","96440238dea9a91f","a69b4d676cdd8262","e03d2ba54bdcf46f","2ae887d730b7a8ee","d869dc1da52adf07","73a5103dc3adee01","dc9355aeff0488cd","30c7ffb6e7bf939c","70e51cb987ac87c7","2a6b1d19b7283bcb","f8c79fda5a890213","4ddda79ffcdd696a","78bf22530dd6f44d","6f15e13c11b7e5fa","2be5377ab58e9aeb","0c834b13c6e11b0a","26394bf0d7797e55"],"x":1454,"y":199,"w":732,"h":762},{"id":"344bcbca55cab7a0","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["eecc12261386ad28"],"x":1454,"y":979,"w":212,"h":82},{"id":"6eb6441f8e788ac6","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["5d8cd4722c73448a"],"x":1194,"y":979,"w":172,"h":82},{"id":"727fb0dc0acf7387","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["65173f1baed4881b","828db200701bc5ae"],"x":1454,"y":59,"w":192,"h":122},{"id":"ed5b3a357b3ce33c","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["4767fcd8f843b55f","90ec7fa2e1fff59f"],"x":1194,"y":59,"w":192,"h":122},{"id":"8ce239030b7ed7d7","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["0976eb082b048903","2629361aa8215836"],"x":434,"y":59,"w":252,"h":122},{"id":"cb503c962dd4ec11","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["263768163c4895ed"],"x":434,"y":979,"w":272,"h":82},{"id":"251eab4148c827bd","type":"group","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","style":{"stroke":"#3a3a3a","stroke-opacity":"1","fill":"#1e1e1e","fill-opacity":"0.5","label":true,"label-position":"nw","color":"#cccccc"},"nodes":["ffdd796a63d83cac"],"x":434,"y":1099,"w":272,"h":82},{"id":"da50ae885a6cf0cf","type":"junction","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","x":1385,"y":500,"wires":[["e03d2ba54bdcf46f"]]},{"id":"6f15e13c11b7e5fa","type":"junction","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1480,"y":260,"wires":[["5cac0b52770d5eb9","2be5377ab58e9aeb"]]},{"id":"89b2f32f13c4f037","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb a","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_a"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1710,"y":500,"wires":[["2a6b1d19b7283bcb"]]},{"id":"7afcf91e52d8a219","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb a","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_a"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1750,"y":660,"wires":[["f8c79fda5a890213"]]},{"id":"c8c7050825dc64c6","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb a","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_a"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1670,"y":340,"wires":[["70e51cb987ac87c7"]]},{"id":"b0961b3222c8f231","type":"api-current-state","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"front room lights","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"light_scene","halt_if_type":"msg","halt_if_compare":"is","entity_id":"input_select.front_room_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1560,"y":840,"wires":[["13613451a14979be"],["dc9355aeff0488cd"]]},{"id":"4cd52f02459674db","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"front room lights","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["input_select.front_room_lights"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1900,"y":860,"wires":[["13613451a14979be"]]},{"id":"121a2ef4205d2828","type":"subflow:261b21bd8f270ab0","z":"cebdeac71a09496f","g":"47aecf67f8d3ed53","name":"","x":570,"y":580,"wires":[["02b91bdafa9723aa"],["66fe52d4572bc395"],["0120996a5898a4b4"],["28594f05beadec83"],["79e67f928da5f42d"],["95da107f943a6119"],["e486607c9de13489"],["f3aa836183ae9a17"],["a4e1d7e6c63a327b"],["d915a4658baffc6f"],["6ae767dd751ccd9b"],[],[]]},{"id":"88fed719ebfcbcb4","type":"server-state-changed","z":"cebdeac71a09496f","g":"63cd2e913e0c3815","name":"input toggle","server":"e14e0276.68398","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.credenza_lamp_auto","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"input_select.credenza_lamp","valueType":"str"},{"property":"auto","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":100,"wires":[["0976eb082b048903"],[]]},{"id":"0834a3a713b5864b","type":"server-state-changed","z":"cebdeac71a09496f","g":"4dc3e146e8138909","name":"input boolean","server":"e14e0276.68398","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.credenza_lamp_undefined","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"Undefined","valueType":"str"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"light_scene","propertyType":"msg","value":"Undefined","valueType":"str"}],"x":150,"y":1020,"wires":[["263768163c4895ed"],[]]},{"id":"b4837730a4484b1a","type":"server-state-changed","z":"cebdeac71a09496f","g":"cfbd61aa26717386","name":"input boolean","server":"e14e0276.68398","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.credenza_lamp_update","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"input_select.credenza_lamp.scene","valueType":"global"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"}],"x":150,"y":1140,"wires":[["ffdd796a63d83cac"],[]]},{"id":"c72cc694dbb70ee6","type":"trigger","z":"cebdeac71a09496f","g":"01bdc4097c7467ae","name":"update (3s)","op1":"true","op2":"","op1type":"bool","op2type":"payl","duration":"3","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":1140,"wires":[["f4f8d912145aca6b"]]},{"id":"7e9690e27a652a7c","type":"server-state-changed","z":"cebdeac71a09496f","g":"f7b34fa378ea3c48","name":"input select","server":"e14e0276.68398","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.credenza_lamp","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"--Select--","halt_if_type":"str","halt_if_compare":"is_not","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"light_scene","propertyType":"msg","value":"","valueType":"entityState"}],"x":150,"y":520,"wires":[["47f4d57b2bb5e85f"],[]]},{"id":"942b628c82eaabf7","type":"subflow:d4648be7103d370a","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1610,"y":660,"wires":[["7afcf91e52d8a219"]]},{"id":"5cac0b52770d5eb9","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1535,"y":240,"wires":[]},{"id":"13613451a14979be","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1695,"y":820,"wires":[]},{"id":"96440238dea9a91f","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1915,"y":500,"wires":[]},{"id":"a69b4d676cdd8262","type":"subflow:c29568126d8ba07b","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"","env":[],"x":1560,"y":920,"wires":[["30c7ffb6e7bf939c"]]},{"id":"e03d2ba54bdcf46f","type":"subflow:63b85cf4dded34f1","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"","x":1560,"y":500,"wires":[["89b2f32f13c4f037"]]},{"id":"2ae887d730b7a8ee","type":"subflow:9f76a5ade8ccab89","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1540,"y":340,"wires":[["c8c7050825dc64c6"]]},{"id":"d869dc1da52adf07","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1875,"y":340,"wires":[]},{"id":"73a5103dc3adee01","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1955,"y":640,"wires":[]},{"id":"b261b296bfb9e3b0","type":"link in","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"input select finalize","links":["5cac0b52770d5eb9","13613451a14979be","96440238dea9a91f","d869dc1da52adf07","73a5103dc3adee01","6524de810ffb782c","7b69dc06b0a56fcd","63e8da43ea9ec604","c54bbae95e89fbfe","78bf22530dd6f44d"],"x":1235,"y":920,"wires":[["16c8528a706c9254"]]},{"id":"66fe52d4572bc395","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"off","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1270,"y":340,"wires":[["2ae887d730b7a8ee"]]},{"id":"0120996a5898a4b4","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"max","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":400,"wires":[["da50ae885a6cf0cf"]]},{"id":"28594f05beadec83","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"bright","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":440,"wires":[["da50ae885a6cf0cf"]]},{"id":"79e67f928da5f42d","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"normal","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":480,"wires":[["da50ae885a6cf0cf"]]},{"id":"95da107f943a6119","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"soft","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":520,"wires":[["da50ae885a6cf0cf"]]},{"id":"e486607c9de13489","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"low","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":560,"wires":[["da50ae885a6cf0cf"]]},{"id":"f3aa836183ae9a17","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"night","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1275,"y":600,"wires":[["da50ae885a6cf0cf"]]},{"id":"a4e1d7e6c63a327b","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"random","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1280,"y":660,"wires":[["942b628c82eaabf7"]]},{"id":"6ae767dd751ccd9b","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"hue scenes","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1295,"y":840,"wires":[["b0961b3222c8f231"]]},{"id":"02b91bdafa9723aa","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"undefined","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1280,"y":260,"wires":[["6f15e13c11b7e5fa"]]},{"id":"16c8528a706c9254","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"finalize","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1315,"y":920,"wires":[["a69b4d676cdd8262"]]},{"id":"eecc12261386ad28","type":"subflow:cfd5a1be033911cb","z":"cebdeac71a09496f","g":"344bcbca55cab7a0","x":1560,"y":1020,"wires":[[]]},{"id":"5d8cd4722c73448a","type":"trigger","z":"cebdeac71a09496f","g":"6eb6441f8e788ac6","name":"undefined","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1280,"y":1020,"wires":[["eecc12261386ad28"]]},{"id":"30c7ffb6e7bf939c","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"call update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{update}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1730,"y":920,"wires":[[]]},{"id":"2401a6c156994b2b","type":"subflow:4d31c3c8d67a48c0","z":"cebdeac71a09496f","g":"1f74c54d6bc84bb8","x":2110,"y":1160,"wires":[]},{"id":"7a04e49bcc0b904b","type":"subflow:17e2f5a99394454d","z":"cebdeac71a09496f","g":"1f74c54d6bc84bb8","name":"","x":1750,"y":1160,"wires":[["123f5c72ecda76cf"]]},{"id":"123f5c72ecda76cf","type":"change","z":"cebdeac71a09496f","g":"1f74c54d6bc84bb8","name":"set global","rules":[{"t":"set","p":"input_select.credenza_lamp.scene","pt":"global","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1960,"y":1160,"wires":[["2401a6c156994b2b"]]},{"id":"dc9355aeff0488cd","type":"subflow:dc70039186c82a4c","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1730,"y":860,"wires":[["4cd52f02459674db"]]},{"id":"ffdd796a63d83cac","type":"subflow:f23ba93a1cb512ee","z":"cebdeac71a09496f","g":"251eab4148c827bd","x":570,"y":1140,"wires":[["c72cc694dbb70ee6"]]},{"id":"263768163c4895ed","type":"subflow:f23ba93a1cb512ee","z":"cebdeac71a09496f","g":"cb503c962dd4ec11","x":570,"y":1020,"wires":[["5d8cd4722c73448a"]]},{"id":"47f4d57b2bb5e85f","type":"subflow:f23ba93a1cb512ee","z":"cebdeac71a09496f","g":"47aecf67f8d3ed53","x":570,"y":360,"wires":[["f3b14be2c7b13349"]]},{"id":"70e51cb987ac87c7","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb b","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_b"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1790,"y":340,"wires":[["d869dc1da52adf07"]]},{"id":"2a6b1d19b7283bcb","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb b","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_b"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1830,"y":500,"wires":[["96440238dea9a91f"]]},{"id":"f8c79fda5a890213","type":"api-call-service","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"bulb b","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"homeassistant","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.credenza_bulb_b"],"data":"{}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1870,"y":660,"wires":[["73a5103dc3adee01","02c25251fede9906"]]},{"id":"f3b14be2c7b13349","type":"subflow:53e63bb5b2c59e08","z":"cebdeac71a09496f","g":"47aecf67f8d3ed53","name":"","x":550,"y":400,"wires":[["5be6f47f3dad16c8"]]},{"id":"576a5a82f0773e88","type":"api-call-service","z":"cebdeac71a09496f","g":"1f74c54d6bc84bb8","name":"parent update","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{parent}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1700,"y":1120,"wires":[[]]},{"id":"f4f8d912145aca6b","type":"switch","z":"cebdeac71a09496f","g":"1f74c54d6bc84bb8","name":"is true","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1530,"y":1140,"wires":[["576a5a82f0773e88"],["7a04e49bcc0b904b"]]},{"id":"5be6f47f3dad16c8","type":"change","z":"cebdeac71a09496f","g":"47aecf67f8d3ed53","name":"set change global","rules":[{"t":"set","p":"input_select.credenza_lamp.change","pt":"global","to":"light_scene","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":460,"wires":[["121a2ef4205d2828"]]},{"id":"90ec7fa2e1fff59f","type":"trigger","z":"cebdeac71a09496f","g":"ed5b3a357b3ce33c","name":"passthrough","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1290,"y":140,"wires":[["65173f1baed4881b"]]},{"id":"4767fcd8f843b55f","type":"trigger","z":"cebdeac71a09496f","g":"ed5b3a357b3ce33c","name":"reset","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1270,"y":100,"wires":[["828db200701bc5ae"]]},{"id":"828db200701bc5ae","type":"api-call-service","z":"cebdeac71a09496f","g":"727fb0dc0acf7387","name":"reset auto","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["{{auto}}"],"data":"","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1550,"y":100,"wires":[[]]},{"id":"65173f1baed4881b","type":"api-call-service","z":"cebdeac71a09496f","g":"727fb0dc0acf7387","name":"passthrough","server":"e14e0276.68398","version":5,"debugenabled":false,"domain":"input_select","service":"select_option","areaId":[],"deviceId":[],"entityId":["{{topic}}"],"data":"{\"option\":\"{{light_scene}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1550,"y":140,"wires":[[]]},{"id":"2629361aa8215836","type":"subflow:82bebc3a26047b8f","z":"cebdeac71a09496f","g":"8ce239030b7ed7d7","x":560,"y":140,"wires":[["90ec7fa2e1fff59f"]]},{"id":"0976eb082b048903","type":"api-current-state","z":"cebdeac71a09496f","g":"8ce239030b7ed7d7","name":"credenza lamp on","server":"e14e0276.68398","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.group_credenza_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":550,"y":100,"wires":[["4767fcd8f843b55f"],["2629361aa8215836"]]},{"id":"d915a4658baffc6f","type":"trigger","z":"cebdeac71a09496f","g":"3b47f7bc9894d265","name":"spectrum","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1285,"y":760,"wires":[["4ddda79ffcdd696a"]]},{"id":"4ddda79ffcdd696a","type":"subflow:152a4a9b90c79d8f","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1590,"y":760,"wires":[["78bf22530dd6f44d"]]},{"id":"78bf22530dd6f44d","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"input select finalize","mode":"link","links":["b261b296bfb9e3b0"],"x":1735,"y":760,"wires":[]},{"id":"2be5377ab58e9aeb","type":"subflow:9e5ef3da4a978410","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","x":1650,"y":280,"wires":[[]]},{"id":"26394bf0d7797e55","type":"link out","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"link out 828","mode":"link","links":["0c834b13c6e11b0a"],"x":2145,"y":680,"wires":[]},{"id":"0c834b13c6e11b0a","type":"link in","z":"cebdeac71a09496f","g":"c6dfb9a4d9f7d48e","name":"link in 577","links":["26394bf0d7797e55"],"x":1495,"y":680,"wires":[["942b628c82eaabf7"]]},{"id":"02c25251fede9906","type":"subflow:41dc0bde7ec9a867","z":"cebdeac71a09496f","g":"a2f5654d2dd13025","x":2020,"y":680,"wires":[["26394bf0d7797e55"]]},{"id":"e14e0276.68398","type":"server","name":"Home Assistant","version":5,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"y|yes|true|on|home|open","connectionDelay":true,"cacheJson":true,"heartbeat":false,"heartbeatInterval":30,"areaSelector":"friendlyName","deviceSelector":"friendlyName","entitySelector":"friendlyName","statusSeparator":"at: ","statusYear":"hidden","statusMonth":"short","statusDay":"numeric","statusHourCycle":"h23","statusTimeFormat":"h:m","enableGlobalContextStore":true}]